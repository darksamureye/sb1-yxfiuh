{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","createRoot","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","Circle","Clock","Download","EyeOff","FileText","Heart","Lock","LogIn","MapPin","Menu","MicOff","Mic","Pause","Play","Quote","Radio","RefreshCw","Settings","Sun","UserPlus","X","useNavigation","isMenuOpen","setIsMenuOpen","useState","Header","toggleMenu","jsx","jsxs","Footer","Layout","useAuth","create","set","user","value","firebaseConfig","app","initializeApp","getAuth","db","getFirestore","storage","getStorage","uploadRecording","blob","childId","timestamp","filename","storageRef","uploadBytes","url","getDownloadURL","addDoc","collection","useRecordingStore","get","recording","state","error","createCapacitorPlatforms","win","defaultPlatformMap","capPlatforms","addPlatform","name","platform","setPlatform","initPlatforms","CapacitorPlatforms","ExceptionCode","CapacitorException","message","code","data","getPlatformId","_a","_b","createCapacitor","_c","_d","_e","capCustomPlatform","cap","Plugins","defaultGetPlatform","getPlatform","defaultIsNativePlatform","isNativePlatform","defaultIsPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","isPluginAvailable","defaultGetPluginHeader","handleError","err","pluginMethodNoop","_target","prop","defaultRegisterPlugin","jsImplementations","registeredPlugin","pluginHeader","jsImplementation","loadPluginImplementation","createPluginMethod","impl","methodHeader","options","callback","createPluginMethodWrapper","remove","wrapper","args","fn","addListener","removeListener","addListenerNative","eventName","call","callbackId","resolve","proxy","_","registerPlugin","filePath","initCapacitorGlobal","Capacitor","WebPlugin","config","listenerFunc","windowListener","listener","listeners","windowEventName","pluginEventName","event","msg","index","handle","encode","str","decode","CapacitorCookiesPluginWeb","cookies","cookieMap","cookie","key","encodedKey","encodedValue","expires","path","domain","readBlobAsBase64","reject","reader","base64String","normalizeHttpHeaders","headers","originalKeys","acc","buildUrlParams","params","shouldEncode","accumulator","entry","item","buildRequestInit","extra","output","type","form","CapacitorHttpPluginWeb","requestInit","urlParams","response","contentType","responseType","VoiceRecorder","__vitePreload","App","ImpactStyle","NotificationType","Haptics","useBackgroundRecording","isActive","setIsActive","addRecording","recordingInterval","useRef","currentRecordingStart","startRecording","stopCurrentSegment","startNewSegment","newState","result","duration","stopRecording","useEffect","createJSONStorage","parse","str2","newValue","toThenable","input","onFulfilled","_onRejected","_onFulfilled","onRejected","oldImpl","baseOptions","api","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","thenableSerialize","setItem","errorInSync","thenable","serializedValue","savedSetState","replace","configResult","stateFromStorage","hydrate","cb","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","newImpl","migrationResult","migrated","persistImpl","__vite_import_meta_env__","persist","useSettingsStore","pin","PinDialog","isOpen","onClose","onSubmit","title","setPin","handleSubmit","RecordButton","isRecording","onClick","formatDuration","minutes","seconds","RecordingStatus","RecordingControls","onStartRecording","onStopRecording","CartoonElements","quotes","DailyQuote","today","quoteIndex","quote","useSound","soundRef","play","useCallback","src","sound","Howl","cleanup","HaloIcon","GUARDIAN_CONNECT_SOUND","GuardianPresence","isConnected","isFirstConnection","onConnectionComplete","showAnimation","setShowAnimation","handleConnection","cleanupFn","t","o","r","s","i","u","j","W","T","U","Q","S","$","J","v","A","P","Y","I","H","G","Z","ee","D","K","L","E","x","R","oe","re","se","te","ne","ie","V","ae","pe","N","de","w","ce","ue","C","le","Te","me","fe","M","y.createElement","ye","ge","he","xe","be","B","Se","Ae","z","F","l.memo","l.createElement","l.Fragment","Oe","f.createElement","Ee","f.useCallback","Re","ve","Pe","O","Ie","_t","ChildRecorder","validatePin","showPinDialog","setShowPinDialog","setDuration","setIsFirstConnection","isGuardianConnected","setIsGuardianConnected","timer","interval","startTime","handleStartRecording","toast","handleStopRecording","handlePinSubmit","version","PENDING_TIMEOUT_MS","PACKAGE_VERSION","INTERNAL_AUTH_VERSION","INSTALLATIONS_API_URL","TOKEN_EXPIRATION_BUFFER","SERVICE","SERVICE_NAME","ERROR_DESCRIPTION_MAP","ERROR_FACTORY","ErrorFactory","isServerError","FirebaseError","getInstallationsEndpoint","projectId","extractAuthTokenInfoFromResponse","getExpiresInFromResponseExpiresIn","getErrorFromResponse","requestName","errorData","getHeaders","apiKey","getHeadersWithAuth","appConfig","refreshToken","getAuthorizationHeader","retryIfServerError","responseExpiresIn","createInstallationRequest","heartbeatServiceProvider","fid","endpoint","heartbeatService","heartbeatsHeader","body","request","responseValue","sleep","ms","bufferToBase64UrlSafe","array","VALID_FID_PATTERN","INVALID_FID","generateFid","fidByteArray","getKey","fidChangeCallbacks","fidChanged","callFidChangeCallbacks","broadcastFidChange","callbacks","channel","getBroadcastChannel","closeBroadcastChannel","broadcastChannel","DATABASE_NAME","DATABASE_VERSION","OBJECT_STORE_NAME","dbPromise","getDbPromise","openDB","oldVersion","tx","objectStore","oldValue","update","updateFn","store","getInstallationEntry","installations","registrationPromise","installationEntry","oldEntry","updateOrCreateInstallationEntry","entryWithPromise","triggerRegistrationIfNecessary","clearTimedOutRequest","registrationPromiseWithError","inProgressEntry","registerInstallation","waitUntilFidRegistration","registeredInstallationEntry","updateInstallationRequest","hasInstallationRequestTimedOut","generateAuthTokenRequest","getGenerateAuthTokenEndpoint","refreshAuthToken","forceRefresh","tokenPromise","isEntryRegistered","oldAuthToken","isAuthTokenValid","waitUntilAuthTokenRequest","makeAuthTokenRequestInProgressEntry","fetchAuthTokenFromServer","updateAuthTokenRequest","authToken","hasAuthTokenRequestTimedOut","updatedInstallationEntry","isAuthTokenExpired","now","inProgressAuthToken","getId","installationsImpl","getToken","completeInstallationRegistration","extractAppConfig","getMissingValueError","configKeys","keyName","valueName","INSTALLATIONS_NAME","INSTALLATIONS_NAME_INTERNAL","publicFactory","container","_getProvider","internalFactory","registerInstallations","_registerComponent","registerVersion","ANALYTICS_TYPE","GA_FID_KEY","ORIGIN_KEY","FETCH_TIMEOUT_MILLIS","DYNAMIC_CONFIG_URL","GTAG_URL","logger","Logger","ERRORS","createGtagTrustedTypesScriptURL","promiseAllSettled","promises","promise","createTrustedTypesPolicy","policyName","policyOptions","trustedTypesPolicy","insertScriptTag","dataLayerName","measurementId","script","gtagScriptURL","getOrCreateDataLayer","dataLayer","gtagOnConfig","gtagCore","initializationPromisesMap","dynamicConfigPromisesList","measurementIdToAppId","gtagParams","correspondingAppId","foundConfig","gtagOnEvent","initializationPromisesToWaitFor","gaSendToList","dynamicConfigResults","sendToId","initializationPromise","wrapGtag","gtagWrapper","command","consentAction","fieldName","customParams","wrapOrCreateGtag","gtagFunctionName","_args","findGtagScriptOnPage","scriptTags","LONG_RETRY_FACTOR","BASE_INTERVAL_MILLIS","RetryData","throttleMetadata","intervalMillis","appId","metadata","defaultRetryData","fetchDynamicConfig","appFields","appUrl","errorMessage","jsonResponse","fetchDynamicConfigWithRetry","retryData","timeoutMillis","signal","AnalyticsAbortSignal","attemptFetchDynamicConfigWithRetry","throttleEndTimeMillis","backoffCount","setAbortableTimeout","isRetriableError","backoffMillis","calculateBackoffMillis","timeout","httpStatus","logEvent$1","gtagFunction","eventParams","validateIndexedDB","isIndexedDBAvailable","validateIndexedDBOpenable","_initializeAnalytics","dynamicConfigPromise","fidPromise","envIsValid","dynamicConfig","configProperties","AnalyticsService","gtagName","gtagCoreFunction","wrappedGtagFunction","globalInitDone","warnOnBrowserContextMismatch","mismatchedEnvMessages","isBrowserExtension","areCookiesEnabled","details","factory","wrappedGtag","getAnalytics","getApp","getModularInstance","analyticsProvider","initializeAnalytics","existingInstance","deepEqual","isSupported","logEvent","analyticsInstance","registerAnalytics","analyticsOptions","analytics","getApps","auth","fetchUserRecordings","userId","query","where","orderBy","getDocs","doc","useRecordings","recordings","setRecordings","isLoading","setIsLoading","setError","fetchedRecordings","TranscriptView","transcript","ParentDashboard","isPlaying","setIsPlaying","newPin","setNewPin","isLiveMonitoring","setIsLiveMonitoring","isLocationTracking","setIsLocationTracking","stopPin","setStopPin","refreshRecordings","toggleLiveMonitoring","toggleLocationTracking","signIn","email","password","userCredential","signInWithEmailAndPassword","userDoc","getDoc","userData","authError","signUp","role","createUserWithEmailAndPassword","setDoc","initializeAuth","onAuthStateChanged","firebaseUser","LoginForm","setEmail","setPassword","Fragment","SignupForm","setName","setRole","AnonymousMode","setAnonymous","handleAnonymousAccess","AuthPage","isLogin","setIsLogin","isAuthenticated","isAnonymous","Toaster","DataConnect","systemRef","statusQuery","collectionName","queryParams","collectionRef","constraints","field","dataConnect","StrictMode"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,34,35,36,37,38,40,53,54,56,57],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/circle.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/eye-off.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/heart.js","../../node_modules/lucide-react/dist/esm/icons/lock.js","../../node_modules/lucide-react/dist/esm/icons/log-in.js","../../node_modules/lucide-react/dist/esm/icons/map-pin.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/mic-off.js","../../node_modules/lucide-react/dist/esm/icons/mic.js","../../node_modules/lucide-react/dist/esm/icons/pause.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/quote.js","../../node_modules/lucide-react/dist/esm/icons/radio.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/sun.js","../../node_modules/lucide-react/dist/esm/icons/user-plus.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/hooks/useNavigation.ts","../../src/components/layout/Header.tsx","../../src/components/layout/Footer.tsx","../../src/components/layout/Layout.tsx","../../src/store/authStore.ts","../../src/config/firebase.ts","../../src/services/recordingService.ts","../../src/store/recordingStore.ts","../../node_modules/@capacitor/core/dist/index.js","../../node_modules/capacitor-voice-recorder/dist/esm/index.js","../../node_modules/@capacitor/app/dist/esm/index.js","../../node_modules/@capacitor/haptics/dist/esm/definitions.js","../../node_modules/@capacitor/haptics/dist/esm/index.js","../../src/hooks/useBackgroundRecording.ts","../../node_modules/zustand/esm/middleware.mjs","../../src/store/settingsStore.ts","../../src/components/PinDialog.tsx","../../src/components/recording/RecordButton.tsx","../../src/utils/audio.ts","../../src/components/recording/RecordingStatus.tsx","../../src/components/recording/RecordingControls.tsx","../../src/components/decorations/CartoonElements.tsx","../../src/data/quotes.ts","../../src/components/DailyQuote.tsx","../../src/hooks/useSound.ts","../../src/components/icons/HaloIcon.tsx","../../src/components/guardian/GuardianPresence.tsx","../../node_modules/goober/dist/goober.modern.js","../../node_modules/react-hot-toast/dist/index.mjs","../../src/components/ChildRecorder.tsx","../../node_modules/@firebase/installations/dist/esm/index.esm2017.js","../../node_modules/@firebase/analytics/dist/esm/index.esm2017.js","../../src/services/firebase/config.ts","../../src/services/firebase/recordings.ts","../../src/hooks/useRecordings.ts","../../src/components/recording/TranscriptView.tsx","../../src/components/ParentDashboard.tsx","../../src/services/firebase/auth.ts","../../src/components/auth/LoginForm.tsx","../../src/components/auth/SignupForm.tsx","../../src/components/auth/AnonymousMode.tsx","../../src/components/auth/AuthPage.tsx","../../src/App.tsx","../../src/services/firebase/dataConnect.ts","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({\n      color = \"currentColor\",\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = \"\",\n      children,\n      ...rest\n    }, ref) => {\n      return createElement(\n        \"svg\",\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n          className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n          ...rest\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...Array.isArray(children) ? children : [children]\n        ]\n      );\n    }\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Circle = createLucideIcon(\"Circle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Circle as default };\n//# sourceMappingURL=circle.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EyeOff = createLucideIcon(\"EyeOff\", [\n  [\"path\", { d: \"M9.88 9.88a3 3 0 1 0 4.24 4.24\", key: \"1jxqfv\" }],\n  [\n    \"path\",\n    {\n      d: \"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68\",\n      key: \"9wicm4\"\n    }\n  ],\n  [\n    \"path\",\n    { d: \"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61\", key: \"1jreej\" }\n  ],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }]\n]);\n\nexport { EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heart = createLucideIcon(\"Heart\", [\n  [\n    \"path\",\n    {\n      d: \"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\",\n      key: \"c3ymky\"\n    }\n  ]\n]);\n\nexport { Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LogIn = createLucideIcon(\"LogIn\", [\n  [\"path\", { d: \"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4\", key: \"u53s6r\" }],\n  [\"polyline\", { points: \"10 17 15 12 10 7\", key: \"1ail0h\" }],\n  [\"line\", { x1: \"15\", x2: \"3\", y1: \"12\", y2: \"12\", key: \"v6grx8\" }]\n]);\n\nexport { LogIn as default };\n//# sourceMappingURL=log-in.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MapPin = createLucideIcon(\"MapPin\", [\n  [\"path\", { d: \"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\", key: \"2oe9fu\" }],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n]);\n\nexport { MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MicOff = createLucideIcon(\"MicOff\", [\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }],\n  [\"path\", { d: \"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2\", key: \"80xlxr\" }],\n  [\"path\", { d: \"M5 10v2a7 7 0 0 0 12 5\", key: \"p2k8kg\" }],\n  [\"path\", { d: \"M15 9.34V5a3 3 0 0 0-5.68-1.33\", key: \"1gzdoj\" }],\n  [\"path\", { d: \"M9 9v3a3 3 0 0 0 5.12 2.12\", key: \"r2i35w\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"19\", y2: \"22\", key: \"x3vr5v\" }]\n]);\n\nexport { MicOff as default };\n//# sourceMappingURL=mic-off.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mic = createLucideIcon(\"Mic\", [\n  [\"path\", { d: \"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z\", key: \"131961\" }],\n  [\"path\", { d: \"M19 10v2a7 7 0 0 1-14 0v-2\", key: \"1vc78b\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"19\", y2: \"22\", key: \"x3vr5v\" }]\n]);\n\nexport { Mic as default };\n//# sourceMappingURL=mic.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pause = createLucideIcon(\"Pause\", [\n  [\"rect\", { width: \"4\", height: \"16\", x: \"6\", y: \"4\", key: \"iffhe4\" }],\n  [\"rect\", { width: \"4\", height: \"16\", x: \"14\", y: \"4\", key: \"sjin7j\" }]\n]);\n\nexport { Pause as default };\n//# sourceMappingURL=pause.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Quote = createLucideIcon(\"Quote\", [\n  [\n    \"path\",\n    {\n      d: \"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z\",\n      key: \"4rm80e\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z\",\n      key: \"10za9r\"\n    }\n  ]\n]);\n\nexport { Quote as default };\n//# sourceMappingURL=quote.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Radio = createLucideIcon(\"Radio\", [\n  [\"path\", { d: \"M4.9 19.1C1 15.2 1 8.8 4.9 4.9\", key: \"1vaf9d\" }],\n  [\"path\", { d: \"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5\", key: \"u1ii0m\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }],\n  [\"path\", { d: \"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5\", key: \"1j5fej\" }],\n  [\"path\", { d: \"M19.1 4.9C23 8.8 23 15.1 19.1 19\", key: \"10b0cb\" }]\n]);\n\nexport { Radio as default };\n//# sourceMappingURL=radio.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sun = createLucideIcon(\"Sun\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n]);\n\nexport { Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserPlus = createLucideIcon(\"UserPlus\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"8\", y2: \"14\", key: \"1bvyxn\" }],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"11\", y2: \"11\", key: \"1shjgl\" }]\n]);\n\nexport { UserPlus as default };\n//# sourceMappingURL=user-plus.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","import { useState } from 'react';\n\nexport function useNavigation() {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  return {\n    isMenuOpen,\n    toggleMenu,\n  };\n}","import React from 'react';\nimport { Menu } from 'lucide-react';\nimport { useNavigation } from '../../hooks/useNavigation';\n\nexport function Header() {\n  const { toggleMenu } = useNavigation();\n\n  return (\n    <header className=\"bg-white shadow-sm\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={toggleMenu}\n              className=\"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500\"\n            >\n              <Menu className=\"h-6 w-6\" />\n            </button>\n            <h1 className=\"ml-4 text-xl font-bold text-gray-900\">MyApp</h1>\n          </div>\n          <nav className=\"flex space-x-4\">\n            <a href=\"#\" className=\"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\n              Home\n            </a>\n            <a href=\"#\" className=\"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\n              About\n            </a>\n          </nav>\n        </div>\n      </div>\n    </header>\n  );\n}","import React from 'react';\n\nexport function Footer() {\n  return (\n    <footer className=\"bg-gray-800 text-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"flex justify-between items-center\">\n          <p className=\"text-sm\">&copy; {new Date().getFullYear()} MyApp. All rights reserved.</p>\n          <div className=\"flex space-x-6\">\n            <a href=\"#\" className=\"text-gray-300 hover:text-white\">\n              Privacy\n            </a>\n            <a href=\"#\" className=\"text-gray-300 hover:text-white\">\n              Terms\n            </a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}","import React from 'react';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nexport function Layout({ children }: LayoutProps) {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <main className=\"flex-grow\">\n        {children}\n      </main>\n      <Footer />\n    </div>\n  );\n}","import { create } from 'zustand';\nimport { User } from '../types/audio';\n\ninterface AuthState {\n  user: User | null;\n  isAuthenticated: boolean;\n  isAnonymous: boolean;\n  setUser: (user: User | null) => void;\n  setAnonymous: (value: boolean) => void;\n}\n\nexport const useAuth = create<AuthState>((set) => ({\n  user: null,\n  isAuthenticated: false,\n  isAnonymous: false,\n  setUser: (user) => set({ user, isAuthenticated: !!user, isAnonymous: false }),\n  setAnonymous: (value) => set({ isAnonymous: value, isAuthenticated: value, user: null }),\n}));","import { initializeApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\n\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: import.meta.env.VITE_FIREBASE_APP_ID\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);","import { storage, db } from '../config/firebase';\nimport { ref, uploadBytes, getDownloadURL, listAll } from 'firebase/storage';\nimport { collection, addDoc, query, where, getDocs } from 'firebase/firestore';\nimport { AudioSegment } from '../types/audio';\n\nexport async function uploadRecording(blob: Blob, childId: string): Promise<string> {\n  const timestamp = Date.now();\n  const filename = `recordings/${childId}/${timestamp}.webm`;\n  const storageRef = ref(storage, filename);\n  \n  await uploadBytes(storageRef, blob);\n  const url = await getDownloadURL(storageRef);\n  \n  await addDoc(collection(db, 'recordings'), {\n    childId,\n    timestamp,\n    url,\n    duration: 300000, // 5 minutes in milliseconds\n  });\n  \n  return url;\n}\n\nexport async function getRecordings(childId: string): Promise<AudioSegment[]> {\n  const q = query(\n    collection(db, 'recordings'),\n    where('childId', '==', childId)\n  );\n  \n  const querySnapshot = await getDocs(q);\n  const recordings: AudioSegment[] = [];\n  \n  querySnapshot.forEach((doc) => {\n    recordings.push({\n      id: doc.id,\n      ...doc.data()\n    } as AudioSegment);\n  });\n  \n  return recordings.sort((a, b) => b.timestamp - a.timestamp);\n}","import { create } from 'zustand';\nimport { uploadRecording } from '../services/recordingService';\nimport { useAuth } from './authStore';\n\ninterface RecordingState {\n  recordings: Blob[];\n  isUploading: boolean;\n  addRecording: (recording: Blob) => Promise<void>;\n  clearRecordings: () => void;\n}\n\nexport const useRecordingStore = create<RecordingState>((set, get) => ({\n  recordings: [],\n  isUploading: false,\n  addRecording: async (recording: Blob) => {\n    set({ isUploading: true });\n    try {\n      const user = useAuth.getState().user;\n      if (user?.id) {\n        await uploadRecording(recording, user.id);\n        set((state) => ({ \n          recordings: [...state.recordings, recording],\n          isUploading: false \n        }));\n      }\n    } catch (error) {\n      console.error('Error uploading recording:', error);\n      set({ isUploading: false });\n    }\n  },\n  clearRecordings: () => set({ recordings: [] }),\n}));","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!(config === null || config === void 0 ? void 0 : config.name)) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair ✨\n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        Object.defineProperty(p, 'remove', {\n            value: async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            },\n        });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data) {\n        const listeners = this.listeners[eventName];\n        if (listeners) {\n            listeners.forEach(listener => listener(data));\n        }\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') ||\n        options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, buildRequestInit, registerPlugin, registerWebPlugin, setPlatform };\n//# sourceMappingURL=index.js.map\n","import { registerPlugin } from '@capacitor/core';\nconst VoiceRecorder = registerPlugin('VoiceRecorder', {\n    web: () => import('./web').then(m => new m.VoiceRecorderWeb()),\n});\nexport * from './definitions';\nexport { VoiceRecorder };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n/**\n * @deprecated Use `NotificationType`.\n * @since 1.0.0\n */\nexport const HapticsNotificationType = NotificationType;\n/**\n * @deprecated Use `ImpactStyle`.\n * @since 1.0.0\n */\nexport const HapticsImpactStyle = ImpactStyle;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","import { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '../store/authStore';\nimport { useRecordingStore } from '../store/recordingStore';\nimport { VoiceRecorder } from 'capacitor-voice-recorder';\nimport { App } from '@capacitor/app';\nimport { Haptics, ImpactStyle } from '@capacitor/haptics';\nimport toast from 'react-hot-toast';\n\nexport function useBackgroundRecording() {\n  const [isActive, setIsActive] = useState(false);\n  const { user } = useAuth();\n  const { addRecording } = useRecordingStore();\n  const recordingInterval = useRef<NodeJS.Timeout>();\n  const currentRecordingStart = useRef<number>(0);\n\n  const startRecording = async () => {\n    try {\n      const permissionStatus = await VoiceRecorder.requestAudioRecordingPermission();\n      \n      if (!permissionStatus.value) {\n        throw new Error('Permission denied');\n      }\n\n      await Haptics.impact({ style: ImpactStyle.Heavy });\n      await VoiceRecorder.startRecording();\n      \n      currentRecordingStart.current = Date.now();\n      setIsActive(true);\n\n      recordingInterval.current = setInterval(async () => {\n        await stopCurrentSegment();\n        await startNewSegment();\n      }, 5 * 60 * 1000);\n\n      App.addListener('appStateChange', async ({ isActive: newState }) => {\n        if (!newState) {\n          console.log('App went to background, recording continues');\n        }\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Error starting recording:', error);\n      setIsActive(false);\n      throw error;\n    }\n  };\n\n  const stopCurrentSegment = async () => {\n    try {\n      const result = await VoiceRecorder.stopRecording();\n      const duration = Date.now() - currentRecordingStart.current;\n      \n      if (result.value && result.value.recordDataBase64) {\n        const response = await fetch(\n          `data:${result.value.mimeType};base64,${result.value.recordDataBase64}`\n        );\n        const blob = await response.blob();\n        await addRecording(blob);\n      }\n    } catch (error) {\n      console.error('Error stopping segment:', error);\n      throw error;\n    }\n  };\n\n  const startNewSegment = async () => {\n    try {\n      await VoiceRecorder.startRecording();\n      currentRecordingStart.current = Date.now();\n    } catch (error) {\n      console.error('Error starting new segment:', error);\n      setIsActive(false);\n      throw error;\n    }\n  };\n\n  const stopRecording = async () => {\n    try {\n      if (recordingInterval.current) {\n        clearInterval(recordingInterval.current);\n      }\n\n      await stopCurrentSegment();\n      await Haptics.impact({ style: ImpactStyle.Medium });\n      \n      setIsActive(false);\n      return true;\n    } catch (error) {\n      console.error('Error stopping recording:', error);\n      throw error;\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      if (recordingInterval.current) {\n        clearInterval(recordingInterval.current);\n      }\n      if (isActive) {\n        stopRecording().catch(console.error);\n      }\n    };\n  }, []);\n\n  return {\n    isActive,\n    startRecording,\n    stopRecording\n  };\n}","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\ninterface SettingsState {\n  stopPin: string;\n  setStopPin: (pin: string) => void;\n  validatePin: (pin: string) => boolean;\n  resetPin: () => void;\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n  persist(\n    (set, get) => ({\n      stopPin: '1234', // Default PIN\n      setStopPin: (pin: string) => {\n        if (pin.length === 4 && /^\\d+$/.test(pin)) {\n          set({ stopPin: pin });\n          return true;\n        }\n        return false;\n      },\n      validatePin: (pin: string) => get().stopPin === pin,\n      resetPin: () => set({ stopPin: '1234' }),\n    }),\n    {\n      name: 'settings-storage',\n    }\n  )\n);","import React, { useState } from 'react';\nimport { X } from 'lucide-react';\n\ninterface PinDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (pin: string) => void;\n  title: string;\n}\n\nexport function PinDialog({ isOpen, onClose, onSubmit, title }: PinDialogProps) {\n  const [pin, setPin] = useState('');\n\n  if (!isOpen) return null;\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(pin);\n    setPin('');\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-2xl p-6 w-80 shadow-2xl\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-xl font-semibold bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent\">\n            {title}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-gray-100 rounded-full transition-colors\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"password\"\n            value={pin}\n            onChange={(e) => setPin(e.target.value)}\n            placeholder=\"Enter PIN\"\n            className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl mb-4\n                     focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200\n                     transition-all duration-200\"\n            maxLength={4}\n            pattern=\"[0-9]*\"\n            inputMode=\"numeric\"\n            autoFocus\n          />\n          <button\n            type=\"submit\"\n            className=\"w-full bg-gradient-to-r from-indigo-500 to-purple-500\n                     text-white py-3 rounded-xl font-medium\n                     hover:from-indigo-600 hover:to-purple-600\n                     transform transition-all duration-200\n                     hover:shadow-lg active:scale-98\"\n          >\n            Submit\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport { Mic, MicOff } from 'lucide-react';\n\ninterface RecordButtonProps {\n  isRecording: boolean;\n  onClick: () => void;\n}\n\nexport function RecordButton({ isRecording, onClick }: RecordButtonProps) {\n  return (\n    <button\n      onClick={onClick}\n      className={`\n        w-48 h-48 rounded-full shadow-xl\n        flex items-center justify-center\n        transform transition-all duration-300\n        ${isRecording \n          ? 'bg-red-500 hover:bg-red-600 scale-110' \n          : 'bg-blue-500 hover:bg-blue-600'\n        }\n        active:scale-95\n      `}\n    >\n      {isRecording ? (\n        <MicOff className=\"h-24 w-24 text-white\" />\n      ) : (\n        <Mic className=\"h-24 w-24 text-white\" />\n      )}\n    </button>\n  );\n}","import { AudioSegment } from '../types/audio';\n\nexport const formatDuration = (duration: number): string => {\n  const minutes = Math.floor(duration / 60000);\n  const seconds = Math.floor((duration % 60000) / 1000);\n  return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n};\n\nexport const createAudioUrl = (blob: Blob): string => {\n  return URL.createObjectURL(blob);\n};\n\nexport const cleanupAudioUrl = (url: string): void => {\n  URL.revokeObjectURL(url);\n};\n\nexport const decodeAudioData = async (context: AudioContext, arrayBuffer: ArrayBuffer) => {\n  try {\n    return await context.decodeAudioData(arrayBuffer);\n  } catch (error) {\n    console.error('Error decoding audio data:', error);\n    throw new Error('Failed to decode audio data');\n  }\n};\n\nexport const loadAudioFile = async (url: string): Promise<ArrayBuffer> => {\n  try {\n    const response = await fetch(url);\n    if (!response.ok) throw new Error('Network response was not ok');\n    return await response.arrayBuffer();\n  } catch (error) {\n    console.error('Error loading audio file:', error);\n    throw new Error('Failed to load audio file');\n  }\n};","import React from 'react';\nimport { Clock } from 'lucide-react';\nimport { formatDuration } from '../../utils/audio';\n\ninterface RecordingStatusProps {\n  isRecording: boolean;\n  duration: number;\n}\n\nexport function RecordingStatus({ isRecording, duration }: RecordingStatusProps) {\n  return (\n    <div className={`\n      flex items-center gap-2 px-4 py-2 rounded-full\n      ${isRecording ? 'bg-red-500/10 text-red-500' : 'bg-gray-100 text-gray-500'}\n      transition-colors duration-300\n    `}>\n      <Clock className=\"h-4 w-4\" />\n      <span className=\"font-medium\">\n        {isRecording ? formatDuration(duration) : 'Ready to Record'}\n      </span>\n    </div>\n  );\n}","import React from 'react';\nimport { RecordButton } from './RecordButton';\nimport { RecordingStatus } from './RecordingStatus';\n\ninterface RecordingControlsProps {\n  isRecording: boolean;\n  duration: number;\n  onStartRecording: () => Promise<void>;\n  onStopRecording: () => void;\n}\n\nexport function RecordingControls({\n  isRecording,\n  duration,\n  onStartRecording,\n  onStopRecording\n}: RecordingControlsProps) {\n  return (\n    <div className=\"flex flex-col items-center gap-6\">\n      <RecordingStatus isRecording={isRecording} duration={duration} />\n      <RecordButton \n        isRecording={isRecording} \n        onClick={isRecording ? onStopRecording : onStartRecording}\n      />\n      <p className=\"text-lg text-white/90 max-w-xs text-center\">\n        {isRecording \n          ? 'Your guardian is watching over you!' \n          : 'Tap the magical orb to activate protection'}\n      </p>\n    </div>\n  );\n}","import React from 'react';\n\nexport function CartoonElements() {\n  return (\n    <div className=\"fixed inset-0 pointer-events-none overflow-hidden\">\n      {/* Bottom right stars */}\n      <img \n        src=\"https://images.unsplash.com/photo-1579547944212-c4f4961a8dd8?w=800&auto=format&fit=crop&q=80&ixlib=rb-4.0.1\"\n        alt=\"\"\n        className=\"absolute -bottom-20 -right-20 w-96 h-96 object-contain opacity-40 animate-float-delayed\"\n      />\n      \n      {/* Center decorative element */}\n      <img \n        src=\"https://images.unsplash.com/photo-1500462918059-b1a0cb512f1d?w=800&auto=format&fit=crop&q=80&ixlib=rb-4.0.1\"\n        alt=\"\"\n        className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] object-contain opacity-30 animate-pulse-slow\"\n      />\n    </div>\n  );\n}","export const quotes = [\n  {\n    text: \"Safety and security don't just happen, they are the result of collective consensus and public investment.\",\n    author: \"Nelson Mandela\"\n  },\n  {\n    text: \"The safety of the people shall be the highest law.\",\n    author: \"Marcus Tullius Cicero\"\n  },\n  {\n    text: \"Better to be safe than sorry.\",\n    author: \"American Proverb\"\n  },\n  {\n    text: \"Security is not the absence of danger, but the presence of God, no matter what the danger.\",\n    author: \"Anonymous\"\n  },\n  {\n    text: \"In matters of security, trust but verify.\",\n    author: \"Russian Proverb\"\n  },\n  {\n    text: \"Prevention is better than cure.\",\n    author: \"Desiderius Erasmus\"\n  },\n  {\n    text: \"The time to repair the roof is when the sun is shining.\",\n    author: \"John F. Kennedy\"\n  },\n  {\n    text: \"Safety isn't expensive, it's priceless.\",\n    author: \"Anonymous\"\n  }\n];","import React from 'react';\nimport { Quote } from 'lucide-react';\nimport { quotes } from '../data/quotes';\n\nexport function DailyQuote() {\n  // Get today's date and use it to select a quote\n  const today = new Date();\n  const dayOfYear = Math.floor((today.getTime() - new Date(today.getFullYear(), 0, 0).getTime()) / 86400000);\n  const quoteIndex = dayOfYear % quotes.length;\n  const quote = quotes[quoteIndex];\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto px-4 py-6\">\n      <div className=\"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg p-6\">\n        <div className=\"flex items-start gap-4\">\n          <Quote className=\"h-6 w-6 text-indigo-600 flex-shrink-0 mt-1\" />\n          <div>\n            <p className=\"text-gray-700 font-medium italic\">\"{quote.text}\"</p>\n            <p className=\"text-gray-500 text-sm mt-2\">— {quote.author}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","import { useRef, useCallback } from 'react';\nimport { Howl } from 'howler';\n\ninterface SoundOptions {\n  volume?: number;\n  loop?: boolean;\n  onEnd?: () => void;\n}\n\ninterface SoundController {\n  play: () => void;\n  stop: () => void;\n  pause: () => void;\n  volume: (value: number) => void;\n}\n\nexport function useSound() {\n  const soundRef = useRef<Howl | null>(null);\n\n  const play = useCallback((src: string, options: SoundOptions = {}): SoundController => {\n    // Clean up existing sound\n    if (soundRef.current) {\n      soundRef.current.unload();\n    }\n\n    // Create new sound\n    const sound = new Howl({\n      src: [src],\n      volume: options.volume ?? 1,\n      loop: options.loop ?? false,\n      onend: options.onEnd,\n      html5: true // Enable HTML5 Audio for better mobile support\n    });\n\n    soundRef.current = sound;\n\n    return {\n      play: () => sound.play(),\n      stop: () => sound.stop(),\n      pause: () => sound.pause(),\n      volume: (value: number) => sound.volume(value)\n    };\n  }, []);\n\n  // Cleanup on unmount\n  const cleanup = useCallback(() => {\n    if (soundRef.current) {\n      soundRef.current.unload();\n      soundRef.current = null;\n    }\n  }, []);\n\n  return { play, cleanup };\n}","import React from 'react';\nimport { Circle, Sun } from 'lucide-react';\n\ninterface HaloIconProps {\n  className?: string;\n}\n\nexport function HaloIcon({ className = \"h-16 w-16\" }: HaloIconProps) {\n  return (\n    <div className={`relative ${className}`}>\n      <Sun className=\"absolute inset-0 w-full h-full text-white opacity-50 animate-spin-slow\" />\n      <Circle className=\"absolute inset-0 w-full h-full text-white animate-pulse-slow\" strokeWidth={1.5} />\n      <Circle className=\"absolute inset-0 w-full h-full text-white/80\" strokeWidth={2} />\n    </div>\n  );\n}","import React, { useEffect, useState, useCallback } from 'react';\nimport { Heart } from 'lucide-react';\nimport { useSound } from '../../hooks/useSound';\nimport { HaloIcon } from '../icons/HaloIcon';\n\nconst GUARDIAN_CONNECT_SOUND = '/sounds/guardian-connect.mp3';\n\ninterface GuardianPresenceProps {\n  isConnected?: boolean;\n  isFirstConnection?: boolean;\n  onConnectionComplete?: () => void;\n}\n\nexport function GuardianPresence({ \n  isConnected = false, \n  isFirstConnection = false,\n  onConnectionComplete\n}: GuardianPresenceProps) {\n  const { play, cleanup } = useSound();\n  const [showAnimation, setShowAnimation] = useState(false);\n\n  const handleConnection = useCallback(() => {\n    if (isFirstConnection && isConnected) {\n      try {\n        const sound = play(GUARDIAN_CONNECT_SOUND, { \n          volume: 0.4,\n          onEnd: () => {\n            setShowAnimation(false);\n            onConnectionComplete?.();\n          }\n        });\n        \n        setShowAnimation(true);\n        sound.play();\n        \n        return () => {\n          sound.stop();\n          setShowAnimation(false);\n        };\n      } catch (error) {\n        console.error('Failed to play connection sound:', error);\n      }\n    }\n  }, [isConnected, isFirstConnection, onConnectionComplete, play]);\n\n  useEffect(() => {\n    const cleanupFn = handleConnection();\n    return () => {\n      cleanup();\n      cleanupFn?.();\n    };\n  }, [handleConnection, cleanup]);\n\n  return (\n    <div className=\"fixed top-4 left-1/2 -translate-x-1/2 z-50\">\n      <div className={`\n        transition-all duration-300\n        ${isConnected ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-4'}\n      `}>\n        <div className=\"bg-white/95 backdrop-blur-sm rounded-full shadow-lg px-4 py-2\n                      flex items-center gap-2 border-2 border-indigo-100\">\n          <div className=\"relative\">\n            <HaloIcon className=\"h-6 w-6\" />\n            <Heart className=\"absolute inset-0 w-full h-full text-red-500 animate-pulse\" />\n          </div>\n          <span className=\"text-sm font-medium text-gray-700\">\n            Guardian is watching over you\n          </span>\n        </div>\n\n        {showAnimation && (\n          <div className=\"absolute inset-0 bg-indigo-500/20 rounded-full\n                        animate-ping pointer-events-none\" />\n        )}\n      </div>\n    </div>\n  );\n}","let e={data:\"\"},t=t=>\"object\"==typeof window?((t?t.querySelector(\"#_goober\"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement(\"style\")),{innerHTML:\" \",id:\"_goober\"})).firstChild:t||e,r=e=>{let r=t(e),l=r.data;return r.data=\"\",l},l=/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g,a=/\\/\\*[^]*?\\*\\/|  +/g,n=/\\n+/g,o=(e,t)=>{let r=\"\",l=\"\",a=\"\";for(let n in e){let c=e[n];\"@\"==n[0]?\"i\"==n[1]?r=n+\" \"+c+\";\":l+=\"f\"==n[1]?o(c,n):n+\"{\"+o(c,\"k\"==n[1]?\"\":t)+\"}\":\"object\"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\\S+\\([^)]*\\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+\" \"+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,\"-$&\").toLowerCase(),a+=o.p?o.p(n,c):n+\":\"+c+\";\")}return r+(t&&a?t+\"{\"+a+\"}\":a)+l},c={},s=e=>{if(\"object\"==typeof e){let t=\"\";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return\"go\"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,\"\"));)t[4]?o.shift():t[3]?(r=t[3].replace(n,\" \").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n,\" \").trim();return o[0]})(e);c[d]=o(p?{[\"@keyframes \"+d]:t}:t,r?\"\":\".\"+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d},p=(e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?\".\"+t:e&&\"object\"==typeof e?e.props?\"\":o(e,\"\"):!1===e?\"\":e}return e+l+(null==n?\"\":n)},\"\");function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?p(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}let d,f,g,b=u.bind({g:1}),h=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function j(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\\d+/.test(s),c.className=u.apply(r,l)+(s?\" \"+s:\"\"),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}export{u as css,r as extractCss,b as glob,h as keyframes,m as setup,j as styled};\n","\"use client\";\nvar W=e=>typeof e==\"function\",T=(e,t)=>W(e)?e(t):e;var U=(()=>{let e=0;return()=>(++e).toString()})(),b=(()=>{let e;return()=>{if(e===void 0&&typeof window<\"u\"){let t=matchMedia(\"(prefers-reduced-motion: reduce)\");e=!t||t.matches}return e}})();import{useEffect as H,useState as j}from\"react\";var Q=20;var S=new Map,X=1e3,$=e=>{if(S.has(e))return;let t=setTimeout(()=>{S.delete(e),u({type:4,toastId:e})},X);S.set(e,t)},J=e=>{let t=S.get(e);t&&clearTimeout(t)},v=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Q)};case 1:return t.toast.id&&J(t.toast.id),{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:o}=t;return e.toasts.find(r=>r.id===o.id)?v(e,{type:1,toast:o}):v(e,{type:0,toast:o});case 3:let{toastId:s}=t;return s?$(s):e.toasts.forEach(r=>{$(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===s||s===void 0?{...r,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+a}))}}},A=[],P={toasts:[],pausedAt:void 0},u=e=>{P=v(P,e),A.forEach(t=>{t(P)})},Y={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},I=(e={})=>{let[t,o]=j(P);H(()=>(A.push(o),()=>{let a=A.indexOf(o);a>-1&&A.splice(a,1)}),[t]);let s=t.toasts.map(a=>{var r,c;return{...e,...e[a.type],...a,duration:a.duration||((r=e[a.type])==null?void 0:r.duration)||(e==null?void 0:e.duration)||Y[a.type],style:{...e.style,...(c=e[a.type])==null?void 0:c.style,...a.style}}});return{...t,toasts:s}};var G=(e,t=\"blank\",o)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:\"status\",\"aria-live\":\"polite\"},message:e,pauseDuration:0,...o,id:(o==null?void 0:o.id)||U()}),h=e=>(t,o)=>{let s=G(t,e,o);return u({type:2,toast:s}),s.id},n=(e,t)=>h(\"blank\")(e,t);n.error=h(\"error\");n.success=h(\"success\");n.loading=h(\"loading\");n.custom=h(\"custom\");n.dismiss=e=>{u({type:3,toastId:e})};n.remove=e=>u({type:4,toastId:e});n.promise=(e,t,o)=>{let s=n.loading(t.loading,{...o,...o==null?void 0:o.loading});return e.then(a=>(n.success(T(t.success,a),{id:s,...o,...o==null?void 0:o.success}),a)).catch(a=>{n.error(T(t.error,a),{id:s,...o,...o==null?void 0:o.error})}),e};import{useEffect as K,useCallback as L}from\"react\";var Z=(e,t)=>{u({type:1,toast:{id:e,height:t}})},ee=()=>{u({type:5,time:Date.now()})},D=e=>{let{toasts:t,pausedAt:o}=I(e);K(()=>{if(o)return;let r=Date.now(),c=t.map(i=>{if(i.duration===1/0)return;let d=(i.duration||0)+i.pauseDuration-(r-i.createdAt);if(d<0){i.visible&&n.dismiss(i.id);return}return setTimeout(()=>n.dismiss(i.id),d)});return()=>{c.forEach(i=>i&&clearTimeout(i))}},[t,o]);let s=L(()=>{o&&u({type:6,time:Date.now()})},[o]),a=L((r,c)=>{let{reverseOrder:i=!1,gutter:d=8,defaultPosition:p}=c||{},g=t.filter(m=>(m.position||p)===(r.position||p)&&m.height),E=g.findIndex(m=>m.id===r.id),x=g.filter((m,R)=>R<E&&m.visible).length;return g.filter(m=>m.visible).slice(...i?[x+1]:[0,x]).reduce((m,R)=>m+(R.height||0)+d,0)},[t]);return{toasts:t,handlers:{updateHeight:Z,startPause:ee,endPause:s,calculateOffset:a}}};import*as l from\"react\";import{styled as B,keyframes as z}from\"goober\";import*as y from\"react\";import{styled as C,keyframes as me}from\"goober\";import{styled as te,keyframes as k}from\"goober\";var oe=k`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}`,re=k`\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,se=k`\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}`,_=te(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#ff4b4b\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: ${re} 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ${e=>e.secondary||\"#fff\"};\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: ${se} 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n`;import{styled as ae,keyframes as ie}from\"goober\";var ne=ie`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`,V=ae(\"div\")`\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ${e=>e.secondary||\"#e0e0e0\"};\n  border-right-color: ${e=>e.primary||\"#616161\"};\n  animation: ${ne} 1s linear infinite;\n`;import{styled as ce,keyframes as N}from\"goober\";var pe=N`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}`,de=N`\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}`,w=ce(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#61d345\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: ${de} 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ${e=>e.secondary||\"#fff\"};\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n`;var ue=C(\"div\")`\n  position: absolute;\n`,le=C(\"div\")`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n`,Te=me`\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,fe=C(\"div\")`\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: ${Te} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n`,M=({toast:e})=>{let{icon:t,type:o,iconTheme:s}=e;return t!==void 0?typeof t==\"string\"?y.createElement(fe,null,t):t:o===\"blank\"?null:y.createElement(le,null,y.createElement(V,{...s}),o!==\"loading\"&&y.createElement(ue,null,o===\"error\"?y.createElement(_,{...s}):y.createElement(w,{...s})))};var ye=e=>`\n0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,ge=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}\n`,he=\"0%{opacity:0;} 100%{opacity:1;}\",xe=\"0%{opacity:1;} 100%{opacity:0;}\",be=B(\"div\")`\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n`,Se=B(\"div\")`\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n`,Ae=(e,t)=>{let s=e.includes(\"top\")?1:-1,[a,r]=b()?[he,xe]:[ye(s),ge(s)];return{animation:t?`${z(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${z(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F=l.memo(({toast:e,position:t,style:o,children:s})=>{let a=e.height?Ae(e.position||t||\"top-center\",e.visible):{opacity:0},r=l.createElement(M,{toast:e}),c=l.createElement(Se,{...e.ariaProps},T(e.message,e));return l.createElement(be,{className:e.className,style:{...a,...o,...e.style}},typeof s==\"function\"?s({icon:r,message:c}):l.createElement(l.Fragment,null,r,c))});import{css as Pe,setup as Oe}from\"goober\";import*as f from\"react\";Oe(f.createElement);var Ee=({id:e,className:t,style:o,onHeightUpdate:s,children:a})=>{let r=f.useCallback(c=>{if(c){let i=()=>{let d=c.getBoundingClientRect().height;s(e,d)};i(),new MutationObserver(i).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return f.createElement(\"div\",{ref:r,className:t,style:o},a)},Re=(e,t)=>{let o=e.includes(\"top\"),s=o?{top:0}:{bottom:0},a=e.includes(\"center\")?{justifyContent:\"center\"}:e.includes(\"right\")?{justifyContent:\"flex-end\"}:{};return{left:0,right:0,display:\"flex\",position:\"absolute\",transition:b()?void 0:\"all 230ms cubic-bezier(.21,1.02,.73,1)\",transform:`translateY(${t*(o?1:-1)}px)`,...s,...a}},ve=Pe`\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n`,O=16,Ie=({reverseOrder:e,position:t=\"top-center\",toastOptions:o,gutter:s,children:a,containerStyle:r,containerClassName:c})=>{let{toasts:i,handlers:d}=D(o);return f.createElement(\"div\",{style:{position:\"fixed\",zIndex:9999,top:O,left:O,right:O,bottom:O,pointerEvents:\"none\",...r},className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},i.map(p=>{let g=p.position||t,E=d.calculateOffset(p,{reverseOrder:e,gutter:s,defaultPosition:t}),x=Re(g,E);return f.createElement(Ee,{id:p.id,key:p.id,onHeightUpdate:d.updateHeight,className:p.visible?ve:\"\",style:x},p.type===\"custom\"?T(p.message,p):a?a(p):f.createElement(F,{toast:p,position:g}))}))};var _t=n;export{w as CheckmarkIcon,_ as ErrorIcon,V as LoaderIcon,F as ToastBar,M as ToastIcon,Ie as Toaster,_t as default,T as resolveValue,n as toast,D as useToaster,I as useToasterStore};\n//# sourceMappingURL=index.mjs.map","import React, { useState, useEffect } from 'react';\nimport { useBackgroundRecording } from '../hooks/useBackgroundRecording';\nimport { useSettingsStore } from '../store/settingsStore';\nimport { PinDialog } from './PinDialog';\nimport { RecordingControls } from './recording/RecordingControls';\nimport { CartoonElements } from './decorations/CartoonElements';\nimport { DailyQuote } from './DailyQuote';\nimport { GuardianPresence } from './guardian/GuardianPresence';\nimport { HaloIcon } from './icons/HaloIcon';\nimport toast from 'react-hot-toast';\n\nexport function ChildRecorder() {\n  const { isActive, startRecording, stopRecording } = useBackgroundRecording();\n  const { validatePin } = useSettingsStore();\n  const [showPinDialog, setShowPinDialog] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [isFirstConnection, setIsFirstConnection] = useState(true);\n  const [isGuardianConnected, setIsGuardianConnected] = useState(false);\n\n  useEffect(() => {\n    // Simulate guardian connection after a short delay\n    const timer = setTimeout(() => {\n      setIsGuardianConnected(true);\n    }, 2000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (isActive) {\n      const startTime = Date.now();\n      interval = setInterval(() => {\n        setDuration(Date.now() - startTime);\n      }, 1000);\n    } else {\n      setDuration(0);\n    }\n    return () => clearInterval(interval);\n  }, [isActive]);\n\n  const handleStartRecording = async () => {\n    try {\n      await startRecording();\n      toast.success('Your guardian is now protecting you!', {\n        icon: '🌟',\n        duration: 3000,\n      });\n    } catch (error) {\n      toast.error('Oops! Something went wrong', {\n        icon: '😕',\n        duration: 3000,\n      });\n    }\n  };\n\n  const handleStopRecording = () => {\n    setShowPinDialog(true);\n  };\n\n  const handlePinSubmit = (pin: string) => {\n    if (validatePin(pin)) {\n      stopRecording();\n      setShowPinDialog(false);\n      toast.success('Protection paused', {\n        icon: '✨',\n        duration: 2000,\n      });\n    } else {\n      toast.error(\"That's not the right code!\", {\n        icon: '🔒',\n        duration: 2000,\n      });\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex flex-col items-center justify-between \n                    bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 \n                    overflow-hidden\">\n      <CartoonElements />\n      \n      <GuardianPresence \n        isConnected={isGuardianConnected}\n        isFirstConnection={isFirstConnection}\n      />\n      \n      <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxwYXRoIGQ9Ik0tMTAgMTBsMjAgLTIwTTAgMGwyMCAtMjBNMTAgMTBsMjAgLTIwIiBzdHJva2U9IiNmZmZmZmYyMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm4pIi8+PC9zdmc+')] opacity-30\"></div>\n      \n      <div className=\"relative z-10 text-center mt-24\">\n        <div className=\"flex justify-center mb-4\">\n          <HaloIcon />\n        </div>\n        <h1 className=\"text-6xl font-bold text-white mb-2\">\n          Chaperone\n        </h1>\n        <p className=\"text-xl text-white/90\">\n          Your Magical Guardian\n        </p>\n      </div>\n\n      <div className=\"relative z-10 flex-grow flex items-center\">\n        <RecordingControls\n          isRecording={isActive}\n          duration={duration}\n          onStartRecording={handleStartRecording}\n          onStopRecording={handleStopRecording}\n        />\n      </div>\n\n      {isActive && (\n        <button\n          onClick={handleStopRecording}\n          className=\"relative z-10 mb-8 px-6 py-3 bg-white/90 rounded-full shadow-lg\n                   hover:bg-white transition-colors duration-200\n                   text-gray-700 font-medium\"\n        >\n          Pause Protection\n        </button>\n      )}\n\n      <div className=\"relative z-10 w-full mb-8\">\n        <DailyQuote />\n      </div>\n\n      <PinDialog\n        isOpen={showPinDialog}\n        onClose={() => setShowPinDialog(false)}\n        onSubmit={handlePinSubmit}\n        title=\"Enter Guardian's Secret Code\"\n      />\n    </div>\n  );\n}","import { _getProvider, getApp, _registerComponent, registerVersion } from '@firebase/app';\nimport { Component } from '@firebase/component';\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\nimport { openDB } from 'idb';\n\nconst name = \"@firebase/installations\";\nconst version = \"0.6.9\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst PENDING_TIMEOUT_MS = 10000;\r\nconst PACKAGE_VERSION = `w:${version}`;\r\nconst INTERNAL_AUTH_VERSION = 'FIS_v2';\r\nconst INSTALLATIONS_API_URL = 'https://firebaseinstallations.googleapis.com/v1';\r\nconst TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\r\nconst SERVICE = 'installations';\r\nconst SERVICE_NAME = 'Installations';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERROR_DESCRIPTION_MAP = {\r\n    [\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */]: 'Missing App configuration value: \"{$valueName}\"',\r\n    [\"not-registered\" /* ErrorCode.NOT_REGISTERED */]: 'Firebase Installation is not registered.',\r\n    [\"installation-not-found\" /* ErrorCode.INSTALLATION_NOT_FOUND */]: 'Firebase Installation not found.',\r\n    [\"request-failed\" /* ErrorCode.REQUEST_FAILED */]: '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',\r\n    [\"app-offline\" /* ErrorCode.APP_OFFLINE */]: 'Could not process request. Application offline.',\r\n    [\"delete-pending-registration\" /* ErrorCode.DELETE_PENDING_REGISTRATION */]: \"Can't delete installation while there is a pending registration request.\"\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory(SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\r\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\r\nfunction isServerError(error) {\r\n    return (error instanceof FirebaseError &&\r\n        error.code.includes(\"request-failed\" /* ErrorCode.REQUEST_FAILED */));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getInstallationsEndpoint({ projectId }) {\r\n    return `${INSTALLATIONS_API_URL}/projects/${projectId}/installations`;\r\n}\r\nfunction extractAuthTokenInfoFromResponse(response) {\r\n    return {\r\n        token: response.token,\r\n        requestStatus: 2 /* RequestStatus.COMPLETED */,\r\n        expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\r\n        creationTime: Date.now()\r\n    };\r\n}\r\nasync function getErrorFromResponse(requestName, response) {\r\n    const responseJson = await response.json();\r\n    const errorData = responseJson.error;\r\n    return ERROR_FACTORY.create(\"request-failed\" /* ErrorCode.REQUEST_FAILED */, {\r\n        requestName,\r\n        serverCode: errorData.code,\r\n        serverMessage: errorData.message,\r\n        serverStatus: errorData.status\r\n    });\r\n}\r\nfunction getHeaders({ apiKey }) {\r\n    return new Headers({\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'x-goog-api-key': apiKey\r\n    });\r\n}\r\nfunction getHeadersWithAuth(appConfig, { refreshToken }) {\r\n    const headers = getHeaders(appConfig);\r\n    headers.append('Authorization', getAuthorizationHeader(refreshToken));\r\n    return headers;\r\n}\r\n/**\r\n * Calls the passed in fetch wrapper and returns the response.\r\n * If the returned response has a status of 5xx, re-runs the function once and\r\n * returns the response.\r\n */\r\nasync function retryIfServerError(fn) {\r\n    const result = await fn();\r\n    if (result.status >= 500 && result.status < 600) {\r\n        // Internal Server Error. Retry request.\r\n        return fn();\r\n    }\r\n    return result;\r\n}\r\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn) {\r\n    // This works because the server will never respond with fractions of a second.\r\n    return Number(responseExpiresIn.replace('s', '000'));\r\n}\r\nfunction getAuthorizationHeader(refreshToken) {\r\n    return `${INTERNAL_AUTH_VERSION} ${refreshToken}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function createInstallationRequest({ appConfig, heartbeatServiceProvider }, { fid }) {\r\n    const endpoint = getInstallationsEndpoint(appConfig);\r\n    const headers = getHeaders(appConfig);\r\n    // If heartbeat service exists, add the heartbeat string to the header.\r\n    const heartbeatService = heartbeatServiceProvider.getImmediate({\r\n        optional: true\r\n    });\r\n    if (heartbeatService) {\r\n        const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\r\n        if (heartbeatsHeader) {\r\n            headers.append('x-firebase-client', heartbeatsHeader);\r\n        }\r\n    }\r\n    const body = {\r\n        fid,\r\n        authVersion: INTERNAL_AUTH_VERSION,\r\n        appId: appConfig.appId,\r\n        sdkVersion: PACKAGE_VERSION\r\n    };\r\n    const request = {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(body)\r\n    };\r\n    const response = await retryIfServerError(() => fetch(endpoint, request));\r\n    if (response.ok) {\r\n        const responseValue = await response.json();\r\n        const registeredInstallationEntry = {\r\n            fid: responseValue.fid || fid,\r\n            registrationStatus: 2 /* RequestStatus.COMPLETED */,\r\n            refreshToken: responseValue.refreshToken,\r\n            authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\r\n        };\r\n        return registeredInstallationEntry;\r\n    }\r\n    else {\r\n        throw await getErrorFromResponse('Create Installation', response);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a promise that resolves after given time passes. */\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction bufferToBase64UrlSafe(array) {\r\n    const b64 = btoa(String.fromCharCode(...array));\r\n    return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\r\nconst INVALID_FID = '';\r\n/**\r\n * Generates a new FID using random values from Web Crypto API.\r\n * Returns an empty string if FID generation fails for any reason.\r\n */\r\nfunction generateFid() {\r\n    try {\r\n        // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\r\n        // bytes. our implementation generates a 17 byte array instead.\r\n        const fidByteArray = new Uint8Array(17);\r\n        const crypto = self.crypto || self.msCrypto;\r\n        crypto.getRandomValues(fidByteArray);\r\n        // Replace the first 4 random bits with the constant FID header of 0b0111.\r\n        fidByteArray[0] = 0b01110000 + (fidByteArray[0] % 0b00010000);\r\n        const fid = encode(fidByteArray);\r\n        return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\r\n    }\r\n    catch (_a) {\r\n        // FID generation errored\r\n        return INVALID_FID;\r\n    }\r\n}\r\n/** Converts a FID Uint8Array to a base64 string representation. */\r\nfunction encode(fidByteArray) {\r\n    const b64String = bufferToBase64UrlSafe(fidByteArray);\r\n    // Remove the 23rd character that was added because of the extra 4 bits at the\r\n    // end of our 17 byte array, and the '=' padding.\r\n    return b64String.substr(0, 22);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a string key that can be used to identify the app. */\r\nfunction getKey(appConfig) {\r\n    return `${appConfig.appName}!${appConfig.appId}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst fidChangeCallbacks = new Map();\r\n/**\r\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\r\n * change to other tabs.\r\n */\r\nfunction fidChanged(appConfig, fid) {\r\n    const key = getKey(appConfig);\r\n    callFidChangeCallbacks(key, fid);\r\n    broadcastFidChange(key, fid);\r\n}\r\nfunction addCallback(appConfig, callback) {\r\n    // Open the broadcast channel if it's not already open,\r\n    // to be able to listen to change events from other tabs.\r\n    getBroadcastChannel();\r\n    const key = getKey(appConfig);\r\n    let callbackSet = fidChangeCallbacks.get(key);\r\n    if (!callbackSet) {\r\n        callbackSet = new Set();\r\n        fidChangeCallbacks.set(key, callbackSet);\r\n    }\r\n    callbackSet.add(callback);\r\n}\r\nfunction removeCallback(appConfig, callback) {\r\n    const key = getKey(appConfig);\r\n    const callbackSet = fidChangeCallbacks.get(key);\r\n    if (!callbackSet) {\r\n        return;\r\n    }\r\n    callbackSet.delete(callback);\r\n    if (callbackSet.size === 0) {\r\n        fidChangeCallbacks.delete(key);\r\n    }\r\n    // Close broadcast channel if there are no more callbacks.\r\n    closeBroadcastChannel();\r\n}\r\nfunction callFidChangeCallbacks(key, fid) {\r\n    const callbacks = fidChangeCallbacks.get(key);\r\n    if (!callbacks) {\r\n        return;\r\n    }\r\n    for (const callback of callbacks) {\r\n        callback(fid);\r\n    }\r\n}\r\nfunction broadcastFidChange(key, fid) {\r\n    const channel = getBroadcastChannel();\r\n    if (channel) {\r\n        channel.postMessage({ key, fid });\r\n    }\r\n    closeBroadcastChannel();\r\n}\r\nlet broadcastChannel = null;\r\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\r\nfunction getBroadcastChannel() {\r\n    if (!broadcastChannel && 'BroadcastChannel' in self) {\r\n        broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\r\n        broadcastChannel.onmessage = e => {\r\n            callFidChangeCallbacks(e.data.key, e.data.fid);\r\n        };\r\n    }\r\n    return broadcastChannel;\r\n}\r\nfunction closeBroadcastChannel() {\r\n    if (fidChangeCallbacks.size === 0 && broadcastChannel) {\r\n        broadcastChannel.close();\r\n        broadcastChannel = null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DATABASE_NAME = 'firebase-installations-database';\r\nconst DATABASE_VERSION = 1;\r\nconst OBJECT_STORE_NAME = 'firebase-installations-store';\r\nlet dbPromise = null;\r\nfunction getDbPromise() {\r\n    if (!dbPromise) {\r\n        dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {\r\n            upgrade: (db, oldVersion) => {\r\n                // We don't use 'break' in this switch statement, the fall-through\r\n                // behavior is what we want, because if there are multiple versions between\r\n                // the old version and the current version, we want ALL the migrations\r\n                // that correspond to those versions to run, not only the last one.\r\n                // eslint-disable-next-line default-case\r\n                switch (oldVersion) {\r\n                    case 0:\r\n                        db.createObjectStore(OBJECT_STORE_NAME);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return dbPromise;\r\n}\r\n/** Assigns or overwrites the record for the given key with the given value. */\r\nasync function set(appConfig, value) {\r\n    const key = getKey(appConfig);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    const objectStore = tx.objectStore(OBJECT_STORE_NAME);\r\n    const oldValue = (await objectStore.get(key));\r\n    await objectStore.put(value, key);\r\n    await tx.done;\r\n    if (!oldValue || oldValue.fid !== value.fid) {\r\n        fidChanged(appConfig, value.fid);\r\n    }\r\n    return value;\r\n}\r\n/** Removes record(s) from the objectStore that match the given key. */\r\nasync function remove(appConfig) {\r\n    const key = getKey(appConfig);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    await tx.objectStore(OBJECT_STORE_NAME).delete(key);\r\n    await tx.done;\r\n}\r\n/**\r\n * Atomically updates a record with the result of updateFn, which gets\r\n * called with the current value. If newValue is undefined, the record is\r\n * deleted instead.\r\n * @return Updated value\r\n */\r\nasync function update(appConfig, updateFn) {\r\n    const key = getKey(appConfig);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    const store = tx.objectStore(OBJECT_STORE_NAME);\r\n    const oldValue = (await store.get(key));\r\n    const newValue = updateFn(oldValue);\r\n    if (newValue === undefined) {\r\n        await store.delete(key);\r\n    }\r\n    else {\r\n        await store.put(newValue, key);\r\n    }\r\n    await tx.done;\r\n    if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\r\n        fidChanged(appConfig, newValue.fid);\r\n    }\r\n    return newValue;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Updates and returns the InstallationEntry from the database.\r\n * Also triggers a registration request if it is necessary and possible.\r\n */\r\nasync function getInstallationEntry(installations) {\r\n    let registrationPromise;\r\n    const installationEntry = await update(installations.appConfig, oldEntry => {\r\n        const installationEntry = updateOrCreateInstallationEntry(oldEntry);\r\n        const entryWithPromise = triggerRegistrationIfNecessary(installations, installationEntry);\r\n        registrationPromise = entryWithPromise.registrationPromise;\r\n        return entryWithPromise.installationEntry;\r\n    });\r\n    if (installationEntry.fid === INVALID_FID) {\r\n        // FID generation failed. Waiting for the FID from the server.\r\n        return { installationEntry: await registrationPromise };\r\n    }\r\n    return {\r\n        installationEntry,\r\n        registrationPromise\r\n    };\r\n}\r\n/**\r\n * Creates a new Installation Entry if one does not exist.\r\n * Also clears timed out pending requests.\r\n */\r\nfunction updateOrCreateInstallationEntry(oldEntry) {\r\n    const entry = oldEntry || {\r\n        fid: generateFid(),\r\n        registrationStatus: 0 /* RequestStatus.NOT_STARTED */\r\n    };\r\n    return clearTimedOutRequest(entry);\r\n}\r\n/**\r\n * If the Firebase Installation is not registered yet, this will trigger the\r\n * registration and return an InProgressInstallationEntry.\r\n *\r\n * If registrationPromise does not exist, the installationEntry is guaranteed\r\n * to be registered.\r\n */\r\nfunction triggerRegistrationIfNecessary(installations, installationEntry) {\r\n    if (installationEntry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n        if (!navigator.onLine) {\r\n            // Registration required but app is offline.\r\n            const registrationPromiseWithError = Promise.reject(ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */));\r\n            return {\r\n                installationEntry,\r\n                registrationPromise: registrationPromiseWithError\r\n            };\r\n        }\r\n        // Try registering. Change status to IN_PROGRESS.\r\n        const inProgressEntry = {\r\n            fid: installationEntry.fid,\r\n            registrationStatus: 1 /* RequestStatus.IN_PROGRESS */,\r\n            registrationTime: Date.now()\r\n        };\r\n        const registrationPromise = registerInstallation(installations, inProgressEntry);\r\n        return { installationEntry: inProgressEntry, registrationPromise };\r\n    }\r\n    else if (installationEntry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n        return {\r\n            installationEntry,\r\n            registrationPromise: waitUntilFidRegistration(installations)\r\n        };\r\n    }\r\n    else {\r\n        return { installationEntry };\r\n    }\r\n}\r\n/** This will be executed only once for each new Firebase Installation. */\r\nasync function registerInstallation(installations, installationEntry) {\r\n    try {\r\n        const registeredInstallationEntry = await createInstallationRequest(installations, installationEntry);\r\n        return set(installations.appConfig, registeredInstallationEntry);\r\n    }\r\n    catch (e) {\r\n        if (isServerError(e) && e.customData.serverCode === 409) {\r\n            // Server returned a \"FID cannot be used\" error.\r\n            // Generate a new ID next time.\r\n            await remove(installations.appConfig);\r\n        }\r\n        else {\r\n            // Registration failed. Set FID as not registered.\r\n            await set(installations.appConfig, {\r\n                fid: installationEntry.fid,\r\n                registrationStatus: 0 /* RequestStatus.NOT_STARTED */\r\n            });\r\n        }\r\n        throw e;\r\n    }\r\n}\r\n/** Call if FID registration is pending in another request. */\r\nasync function waitUntilFidRegistration(installations) {\r\n    // Unfortunately, there is no way of reliably observing when a value in\r\n    // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\r\n    // so we need to poll.\r\n    let entry = await updateInstallationRequest(installations.appConfig);\r\n    while (entry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n        // createInstallation request still in progress.\r\n        await sleep(100);\r\n        entry = await updateInstallationRequest(installations.appConfig);\r\n    }\r\n    if (entry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n        // The request timed out or failed in a different call. Try again.\r\n        const { installationEntry, registrationPromise } = await getInstallationEntry(installations);\r\n        if (registrationPromise) {\r\n            return registrationPromise;\r\n        }\r\n        else {\r\n            // if there is no registrationPromise, entry is registered.\r\n            return installationEntry;\r\n        }\r\n    }\r\n    return entry;\r\n}\r\n/**\r\n * Called only if there is a CreateInstallation request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * CreateInstallation request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\r\nfunction updateInstallationRequest(appConfig) {\r\n    return update(appConfig, oldEntry => {\r\n        if (!oldEntry) {\r\n            throw ERROR_FACTORY.create(\"installation-not-found\" /* ErrorCode.INSTALLATION_NOT_FOUND */);\r\n        }\r\n        return clearTimedOutRequest(oldEntry);\r\n    });\r\n}\r\nfunction clearTimedOutRequest(entry) {\r\n    if (hasInstallationRequestTimedOut(entry)) {\r\n        return {\r\n            fid: entry.fid,\r\n            registrationStatus: 0 /* RequestStatus.NOT_STARTED */\r\n        };\r\n    }\r\n    return entry;\r\n}\r\nfunction hasInstallationRequestTimedOut(installationEntry) {\r\n    return (installationEntry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */ &&\r\n        installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now());\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function generateAuthTokenRequest({ appConfig, heartbeatServiceProvider }, installationEntry) {\r\n    const endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\r\n    const headers = getHeadersWithAuth(appConfig, installationEntry);\r\n    // If heartbeat service exists, add the heartbeat string to the header.\r\n    const heartbeatService = heartbeatServiceProvider.getImmediate({\r\n        optional: true\r\n    });\r\n    if (heartbeatService) {\r\n        const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\r\n        if (heartbeatsHeader) {\r\n            headers.append('x-firebase-client', heartbeatsHeader);\r\n        }\r\n    }\r\n    const body = {\r\n        installation: {\r\n            sdkVersion: PACKAGE_VERSION,\r\n            appId: appConfig.appId\r\n        }\r\n    };\r\n    const request = {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(body)\r\n    };\r\n    const response = await retryIfServerError(() => fetch(endpoint, request));\r\n    if (response.ok) {\r\n        const responseValue = await response.json();\r\n        const completedAuthToken = extractAuthTokenInfoFromResponse(responseValue);\r\n        return completedAuthToken;\r\n    }\r\n    else {\r\n        throw await getErrorFromResponse('Generate Auth Token', response);\r\n    }\r\n}\r\nfunction getGenerateAuthTokenEndpoint(appConfig, { fid }) {\r\n    return `${getInstallationsEndpoint(appConfig)}/${fid}/authTokens:generate`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a valid authentication token for the installation. Generates a new\r\n * token if one doesn't exist, is expired or about to expire.\r\n *\r\n * Should only be called if the Firebase Installation is registered.\r\n */\r\nasync function refreshAuthToken(installations, forceRefresh = false) {\r\n    let tokenPromise;\r\n    const entry = await update(installations.appConfig, oldEntry => {\r\n        if (!isEntryRegistered(oldEntry)) {\r\n            throw ERROR_FACTORY.create(\"not-registered\" /* ErrorCode.NOT_REGISTERED */);\r\n        }\r\n        const oldAuthToken = oldEntry.authToken;\r\n        if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\r\n            // There is a valid token in the DB.\r\n            return oldEntry;\r\n        }\r\n        else if (oldAuthToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n            // There already is a token request in progress.\r\n            tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\r\n            return oldEntry;\r\n        }\r\n        else {\r\n            // No token or token expired.\r\n            if (!navigator.onLine) {\r\n                throw ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */);\r\n            }\r\n            const inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\r\n            tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\r\n            return inProgressEntry;\r\n        }\r\n    });\r\n    const authToken = tokenPromise\r\n        ? await tokenPromise\r\n        : entry.authToken;\r\n    return authToken;\r\n}\r\n/**\r\n * Call only if FID is registered and Auth Token request is in progress.\r\n *\r\n * Waits until the current pending request finishes. If the request times out,\r\n * tries once in this thread as well.\r\n */\r\nasync function waitUntilAuthTokenRequest(installations, forceRefresh) {\r\n    // Unfortunately, there is no way of reliably observing when a value in\r\n    // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\r\n    // so we need to poll.\r\n    let entry = await updateAuthTokenRequest(installations.appConfig);\r\n    while (entry.authToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n        // generateAuthToken still in progress.\r\n        await sleep(100);\r\n        entry = await updateAuthTokenRequest(installations.appConfig);\r\n    }\r\n    const authToken = entry.authToken;\r\n    if (authToken.requestStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n        // The request timed out or failed in a different call. Try again.\r\n        return refreshAuthToken(installations, forceRefresh);\r\n    }\r\n    else {\r\n        return authToken;\r\n    }\r\n}\r\n/**\r\n * Called only if there is a GenerateAuthToken request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * GenerateAuthToken request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\r\nfunction updateAuthTokenRequest(appConfig) {\r\n    return update(appConfig, oldEntry => {\r\n        if (!isEntryRegistered(oldEntry)) {\r\n            throw ERROR_FACTORY.create(\"not-registered\" /* ErrorCode.NOT_REGISTERED */);\r\n        }\r\n        const oldAuthToken = oldEntry.authToken;\r\n        if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\r\n            return Object.assign(Object.assign({}, oldEntry), { authToken: { requestStatus: 0 /* RequestStatus.NOT_STARTED */ } });\r\n        }\r\n        return oldEntry;\r\n    });\r\n}\r\nasync function fetchAuthTokenFromServer(installations, installationEntry) {\r\n    try {\r\n        const authToken = await generateAuthTokenRequest(installations, installationEntry);\r\n        const updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), { authToken });\r\n        await set(installations.appConfig, updatedInstallationEntry);\r\n        return authToken;\r\n    }\r\n    catch (e) {\r\n        if (isServerError(e) &&\r\n            (e.customData.serverCode === 401 || e.customData.serverCode === 404)) {\r\n            // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\r\n            // Generate a new ID next time.\r\n            await remove(installations.appConfig);\r\n        }\r\n        else {\r\n            const updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), { authToken: { requestStatus: 0 /* RequestStatus.NOT_STARTED */ } });\r\n            await set(installations.appConfig, updatedInstallationEntry);\r\n        }\r\n        throw e;\r\n    }\r\n}\r\nfunction isEntryRegistered(installationEntry) {\r\n    return (installationEntry !== undefined &&\r\n        installationEntry.registrationStatus === 2 /* RequestStatus.COMPLETED */);\r\n}\r\nfunction isAuthTokenValid(authToken) {\r\n    return (authToken.requestStatus === 2 /* RequestStatus.COMPLETED */ &&\r\n        !isAuthTokenExpired(authToken));\r\n}\r\nfunction isAuthTokenExpired(authToken) {\r\n    const now = Date.now();\r\n    return (now < authToken.creationTime ||\r\n        authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER);\r\n}\r\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\r\nfunction makeAuthTokenRequestInProgressEntry(oldEntry) {\r\n    const inProgressAuthToken = {\r\n        requestStatus: 1 /* RequestStatus.IN_PROGRESS */,\r\n        requestTime: Date.now()\r\n    };\r\n    return Object.assign(Object.assign({}, oldEntry), { authToken: inProgressAuthToken });\r\n}\r\nfunction hasAuthTokenRequestTimedOut(authToken) {\r\n    return (authToken.requestStatus === 1 /* RequestStatus.IN_PROGRESS */ &&\r\n        authToken.requestTime + PENDING_TIMEOUT_MS < Date.now());\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Creates a Firebase Installation if there isn't one for the app and\r\n * returns the Installation ID.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\r\nasync function getId(installations) {\r\n    const installationsImpl = installations;\r\n    const { installationEntry, registrationPromise } = await getInstallationEntry(installationsImpl);\r\n    if (registrationPromise) {\r\n        registrationPromise.catch(console.error);\r\n    }\r\n    else {\r\n        // If the installation is already registered, update the authentication\r\n        // token if needed.\r\n        refreshAuthToken(installationsImpl).catch(console.error);\r\n    }\r\n    return installationEntry.fid;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a Firebase Installations auth token, identifying the current\r\n * Firebase Installation.\r\n * @param installations - The `Installations` instance.\r\n * @param forceRefresh - Force refresh regardless of token expiration.\r\n *\r\n * @public\r\n */\r\nasync function getToken(installations, forceRefresh = false) {\r\n    const installationsImpl = installations;\r\n    await completeInstallationRegistration(installationsImpl);\r\n    // At this point we either have a Registered Installation in the DB, or we've\r\n    // already thrown an error.\r\n    const authToken = await refreshAuthToken(installationsImpl, forceRefresh);\r\n    return authToken.token;\r\n}\r\nasync function completeInstallationRegistration(installations) {\r\n    const { registrationPromise } = await getInstallationEntry(installations);\r\n    if (registrationPromise) {\r\n        // A createInstallation request is in progress. Wait until it finishes.\r\n        await registrationPromise;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function deleteInstallationRequest(appConfig, installationEntry) {\r\n    const endpoint = getDeleteEndpoint(appConfig, installationEntry);\r\n    const headers = getHeadersWithAuth(appConfig, installationEntry);\r\n    const request = {\r\n        method: 'DELETE',\r\n        headers\r\n    };\r\n    const response = await retryIfServerError(() => fetch(endpoint, request));\r\n    if (!response.ok) {\r\n        throw await getErrorFromResponse('Delete Installation', response);\r\n    }\r\n}\r\nfunction getDeleteEndpoint(appConfig, { fid }) {\r\n    return `${getInstallationsEndpoint(appConfig)}/${fid}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Deletes the Firebase Installation and all associated data.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\r\nasync function deleteInstallations(installations) {\r\n    const { appConfig } = installations;\r\n    const entry = await update(appConfig, oldEntry => {\r\n        if (oldEntry && oldEntry.registrationStatus === 0 /* RequestStatus.NOT_STARTED */) {\r\n            // Delete the unregistered entry without sending a deleteInstallation request.\r\n            return undefined;\r\n        }\r\n        return oldEntry;\r\n    });\r\n    if (entry) {\r\n        if (entry.registrationStatus === 1 /* RequestStatus.IN_PROGRESS */) {\r\n            // Can't delete while trying to register.\r\n            throw ERROR_FACTORY.create(\"delete-pending-registration\" /* ErrorCode.DELETE_PENDING_REGISTRATION */);\r\n        }\r\n        else if (entry.registrationStatus === 2 /* RequestStatus.COMPLETED */) {\r\n            if (!navigator.onLine) {\r\n                throw ERROR_FACTORY.create(\"app-offline\" /* ErrorCode.APP_OFFLINE */);\r\n            }\r\n            else {\r\n                await deleteInstallationRequest(appConfig, entry);\r\n                await remove(appConfig);\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Sets a new callback that will get called when Installation ID changes.\r\n * Returns an unsubscribe function that will remove the callback when called.\r\n * @param installations - The `Installations` instance.\r\n * @param callback - The callback function that is invoked when FID changes.\r\n * @returns A function that can be called to unsubscribe.\r\n *\r\n * @public\r\n */\r\nfunction onIdChange(installations, callback) {\r\n    const { appConfig } = installations;\r\n    addCallback(appConfig, callback);\r\n    return () => {\r\n        removeCallback(appConfig, callback);\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns an instance of {@link Installations} associated with the given\r\n * {@link @firebase/app#FirebaseApp} instance.\r\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\r\n *\r\n * @public\r\n */\r\nfunction getInstallations(app = getApp()) {\r\n    const installationsImpl = _getProvider(app, 'installations').getImmediate();\r\n    return installationsImpl;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction extractAppConfig(app) {\r\n    if (!app || !app.options) {\r\n        throw getMissingValueError('App Configuration');\r\n    }\r\n    if (!app.name) {\r\n        throw getMissingValueError('App Name');\r\n    }\r\n    // Required app config keys\r\n    const configKeys = [\r\n        'projectId',\r\n        'apiKey',\r\n        'appId'\r\n    ];\r\n    for (const keyName of configKeys) {\r\n        if (!app.options[keyName]) {\r\n            throw getMissingValueError(keyName);\r\n        }\r\n    }\r\n    return {\r\n        appName: app.name,\r\n        projectId: app.options.projectId,\r\n        apiKey: app.options.apiKey,\r\n        appId: app.options.appId\r\n    };\r\n}\r\nfunction getMissingValueError(valueName) {\r\n    return ERROR_FACTORY.create(\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */, {\r\n        valueName\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst INSTALLATIONS_NAME = 'installations';\r\nconst INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\r\nconst publicFactory = (container) => {\r\n    const app = container.getProvider('app').getImmediate();\r\n    // Throws if app isn't configured properly.\r\n    const appConfig = extractAppConfig(app);\r\n    const heartbeatServiceProvider = _getProvider(app, 'heartbeat');\r\n    const installationsImpl = {\r\n        app,\r\n        appConfig,\r\n        heartbeatServiceProvider,\r\n        _delete: () => Promise.resolve()\r\n    };\r\n    return installationsImpl;\r\n};\r\nconst internalFactory = (container) => {\r\n    const app = container.getProvider('app').getImmediate();\r\n    // Internal FIS instance relies on public FIS instance.\r\n    const installations = _getProvider(app, INSTALLATIONS_NAME).getImmediate();\r\n    const installationsInternal = {\r\n        getId: () => getId(installations),\r\n        getToken: (forceRefresh) => getToken(installations, forceRefresh)\r\n    };\r\n    return installationsInternal;\r\n};\r\nfunction registerInstallations() {\r\n    _registerComponent(new Component(INSTALLATIONS_NAME, publicFactory, \"PUBLIC\" /* ComponentType.PUBLIC */));\r\n    _registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL, internalFactory, \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n}\n\n/**\r\n * The Firebase Installations Web SDK.\r\n * This SDK does not work in a Node.js environment.\r\n *\r\n * @packageDocumentation\r\n */\r\nregisterInstallations();\r\nregisterVersion(name, version);\r\n// BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\nregisterVersion(name, version, 'esm2017');\n\nexport { deleteInstallations, getId, getInstallations, getToken, onIdChange };\n//# sourceMappingURL=index.esm2017.js.map\n","import { _getProvider, getApp, _registerComponent, registerVersion } from '@firebase/app';\nimport { Logger } from '@firebase/logger';\nimport { ErrorFactory, calculateBackoffMillis, FirebaseError, isIndexedDBAvailable, validateIndexedDBOpenable, isBrowserExtension, areCookiesEnabled, getModularInstance, deepEqual } from '@firebase/util';\nimport { Component } from '@firebase/component';\nimport '@firebase/installations';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Analytics.\r\n */\r\nconst ANALYTICS_TYPE = 'analytics';\r\n// Key to attach FID to in gtag params.\r\nconst GA_FID_KEY = 'firebase_id';\r\nconst ORIGIN_KEY = 'origin';\r\nconst FETCH_TIMEOUT_MILLIS = 60 * 1000;\r\nconst DYNAMIC_CONFIG_URL = 'https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig';\r\nconst GTAG_URL = 'https://www.googletagmanager.com/gtag/js';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logger = new Logger('@firebase/analytics');\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERRORS = {\r\n    [\"already-exists\" /* AnalyticsError.ALREADY_EXISTS */]: 'A Firebase Analytics instance with the appId {$id} ' +\r\n        ' already exists. ' +\r\n        'Only one Firebase Analytics instance can be created for each appId.',\r\n    [\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */]: 'initializeAnalytics() cannot be called again with different options than those ' +\r\n        'it was initially called with. It can be called again with the same options to ' +\r\n        'return the existing instance, or getAnalytics() can be used ' +\r\n        'to get a reference to the already-initialized instance.',\r\n    [\"already-initialized-settings\" /* AnalyticsError.ALREADY_INITIALIZED_SETTINGS */]: 'Firebase Analytics has already been initialized.' +\r\n        'settings() must be called before initializing any Analytics instance' +\r\n        'or it will have no effect.',\r\n    [\"interop-component-reg-failed\" /* AnalyticsError.INTEROP_COMPONENT_REG_FAILED */]: 'Firebase Analytics Interop Component failed to instantiate: {$reason}',\r\n    [\"invalid-analytics-context\" /* AnalyticsError.INVALID_ANALYTICS_CONTEXT */]: 'Firebase Analytics is not supported in this environment. ' +\r\n        'Wrap initialization of analytics in analytics.isSupported() ' +\r\n        'to prevent initialization in unsupported environments. Details: {$errorInfo}',\r\n    [\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */]: 'IndexedDB unavailable or restricted in this environment. ' +\r\n        'Wrap initialization of analytics in analytics.isSupported() ' +\r\n        'to prevent initialization in unsupported environments. Details: {$errorInfo}',\r\n    [\"fetch-throttle\" /* AnalyticsError.FETCH_THROTTLE */]: 'The config fetch request timed out while in an exponential backoff state.' +\r\n        ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\r\n    [\"config-fetch-failed\" /* AnalyticsError.CONFIG_FETCH_FAILED */]: 'Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}',\r\n    [\"no-api-key\" /* AnalyticsError.NO_API_KEY */]: 'The \"apiKey\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\r\n        'contain a valid API key.',\r\n    [\"no-app-id\" /* AnalyticsError.NO_APP_ID */]: 'The \"appId\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\r\n        'contain a valid app ID.',\r\n    [\"no-client-id\" /* AnalyticsError.NO_CLIENT_ID */]: 'The \"client_id\" field is empty.',\r\n    [\"invalid-gtag-resource\" /* AnalyticsError.INVALID_GTAG_RESOURCE */]: 'Trusted Types detected an invalid gtag resource: {$gtagURL}.'\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory('analytics', 'Analytics', ERRORS);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Verifies and creates a TrustedScriptURL.\r\n */\r\nfunction createGtagTrustedTypesScriptURL(url) {\r\n    if (!url.startsWith(GTAG_URL)) {\r\n        const err = ERROR_FACTORY.create(\"invalid-gtag-resource\" /* AnalyticsError.INVALID_GTAG_RESOURCE */, {\r\n            gtagURL: url\r\n        });\r\n        logger.warn(err.message);\r\n        return '';\r\n    }\r\n    return url;\r\n}\r\n/**\r\n * Makeshift polyfill for Promise.allSettled(). Resolves when all promises\r\n * have either resolved or rejected.\r\n *\r\n * @param promises Array of promises to wait for.\r\n */\r\nfunction promiseAllSettled(promises) {\r\n    return Promise.all(promises.map(promise => promise.catch(e => e)));\r\n}\r\n/**\r\n * Creates a TrustedTypePolicy object that implements the rules passed as policyOptions.\r\n *\r\n * @param policyName A string containing the name of the policy\r\n * @param policyOptions Object containing implementations of instance methods for TrustedTypesPolicy, see {@link https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy#instance_methods\r\n * | the TrustedTypePolicy reference documentation}.\r\n */\r\nfunction createTrustedTypesPolicy(policyName, policyOptions) {\r\n    // Create a TrustedTypes policy that we can use for updating src\r\n    // properties\r\n    let trustedTypesPolicy;\r\n    if (window.trustedTypes) {\r\n        trustedTypesPolicy = window.trustedTypes.createPolicy(policyName, policyOptions);\r\n    }\r\n    return trustedTypesPolicy;\r\n}\r\n/**\r\n * Inserts gtag script tag into the page to asynchronously download gtag.\r\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\r\n */\r\nfunction insertScriptTag(dataLayerName, measurementId) {\r\n    const trustedTypesPolicy = createTrustedTypesPolicy('firebase-js-sdk-policy', {\r\n        createScriptURL: createGtagTrustedTypesScriptURL\r\n    });\r\n    const script = document.createElement('script');\r\n    // We are not providing an analyticsId in the URL because it would trigger a `page_view`\r\n    // without fid. We will initialize ga-id using gtag (config) command together with fid.\r\n    const gtagScriptURL = `${GTAG_URL}?l=${dataLayerName}&id=${measurementId}`;\r\n    script.src = trustedTypesPolicy\r\n        ? trustedTypesPolicy === null || trustedTypesPolicy === void 0 ? void 0 : trustedTypesPolicy.createScriptURL(gtagScriptURL)\r\n        : gtagScriptURL;\r\n    script.async = true;\r\n    document.head.appendChild(script);\r\n}\r\n/**\r\n * Get reference to, or create, global datalayer.\r\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\r\n */\r\nfunction getOrCreateDataLayer(dataLayerName) {\r\n    // Check for existing dataLayer and create if needed.\r\n    let dataLayer = [];\r\n    if (Array.isArray(window[dataLayerName])) {\r\n        dataLayer = window[dataLayerName];\r\n    }\r\n    else {\r\n        window[dataLayerName] = dataLayer;\r\n    }\r\n    return dataLayer;\r\n}\r\n/**\r\n * Wrapped gtag logic when gtag is called with 'config' command.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n * @param measurementId GA Measurement ID to set config for.\r\n * @param gtagParams Gtag config params to set.\r\n */\r\nasync function gtagOnConfig(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, measurementId, gtagParams) {\r\n    // If config is already fetched, we know the appId and can use it to look up what FID promise we\r\n    /// are waiting for, and wait only on that one.\r\n    const correspondingAppId = measurementIdToAppId[measurementId];\r\n    try {\r\n        if (correspondingAppId) {\r\n            await initializationPromisesMap[correspondingAppId];\r\n        }\r\n        else {\r\n            // If config is not fetched yet, wait for all configs (we don't know which one we need) and\r\n            // find the appId (if any) corresponding to this measurementId. If there is one, wait on\r\n            // that appId's initialization promise. If there is none, promise resolves and gtag\r\n            // call goes through.\r\n            const dynamicConfigResults = await promiseAllSettled(dynamicConfigPromisesList);\r\n            const foundConfig = dynamicConfigResults.find(config => config.measurementId === measurementId);\r\n            if (foundConfig) {\r\n                await initializationPromisesMap[foundConfig.appId];\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        logger.error(e);\r\n    }\r\n    gtagCore(\"config\" /* GtagCommand.CONFIG */, measurementId, gtagParams);\r\n}\r\n/**\r\n * Wrapped gtag logic when gtag is called with 'event' command.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementId GA Measurement ID to log event to.\r\n * @param gtagParams Params to log with this event.\r\n */\r\nasync function gtagOnEvent(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementId, gtagParams) {\r\n    try {\r\n        let initializationPromisesToWaitFor = [];\r\n        // If there's a 'send_to' param, check if any ID specified matches\r\n        // an initializeIds() promise we are waiting for.\r\n        if (gtagParams && gtagParams['send_to']) {\r\n            let gaSendToList = gtagParams['send_to'];\r\n            // Make it an array if is isn't, so it can be dealt with the same way.\r\n            if (!Array.isArray(gaSendToList)) {\r\n                gaSendToList = [gaSendToList];\r\n            }\r\n            // Checking 'send_to' fields requires having all measurement ID results back from\r\n            // the dynamic config fetch.\r\n            const dynamicConfigResults = await promiseAllSettled(dynamicConfigPromisesList);\r\n            for (const sendToId of gaSendToList) {\r\n                // Any fetched dynamic measurement ID that matches this 'send_to' ID\r\n                const foundConfig = dynamicConfigResults.find(config => config.measurementId === sendToId);\r\n                const initializationPromise = foundConfig && initializationPromisesMap[foundConfig.appId];\r\n                if (initializationPromise) {\r\n                    initializationPromisesToWaitFor.push(initializationPromise);\r\n                }\r\n                else {\r\n                    // Found an item in 'send_to' that is not associated\r\n                    // directly with an FID, possibly a group.  Empty this array,\r\n                    // exit the loop early, and let it get populated below.\r\n                    initializationPromisesToWaitFor = [];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // This will be unpopulated if there was no 'send_to' field , or\r\n        // if not all entries in the 'send_to' field could be mapped to\r\n        // a FID. In these cases, wait on all pending initialization promises.\r\n        if (initializationPromisesToWaitFor.length === 0) {\r\n            /* eslint-disable-next-line @typescript-eslint/no-floating-promises */\r\n            initializationPromisesToWaitFor = Object.values(initializationPromisesMap);\r\n        }\r\n        // Run core gtag function with args after all relevant initialization\r\n        // promises have been resolved.\r\n        await Promise.all(initializationPromisesToWaitFor);\r\n        // Workaround for http://b/141370449 - third argument cannot be undefined.\r\n        gtagCore(\"event\" /* GtagCommand.EVENT */, measurementId, gtagParams || {});\r\n    }\r\n    catch (e) {\r\n        logger.error(e);\r\n    }\r\n}\r\n/**\r\n * Wraps a standard gtag function with extra code to wait for completion of\r\n * relevant initialization promises before sending requests.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n */\r\nfunction wrapGtag(gtagCore, \r\n/**\r\n * Allows wrapped gtag calls to wait on whichever initialization promises are required,\r\n * depending on the contents of the gtag params' `send_to` field, if any.\r\n */\r\ninitializationPromisesMap, \r\n/**\r\n * Wrapped gtag calls sometimes require all dynamic config fetches to have returned\r\n * before determining what initialization promises (which include FIDs) to wait for.\r\n */\r\ndynamicConfigPromisesList, \r\n/**\r\n * Wrapped gtag config calls can narrow down which initialization promise (with FID)\r\n * to wait for if the measurementId is already fetched, by getting the corresponding appId,\r\n * which is the key for the initialization promises map.\r\n */\r\nmeasurementIdToAppId) {\r\n    /**\r\n     * Wrapper around gtag that ensures FID is sent with gtag calls.\r\n     * @param command Gtag command type.\r\n     * @param idOrNameOrParams Measurement ID if command is EVENT/CONFIG, params if command is SET.\r\n     * @param gtagParams Params if event is EVENT/CONFIG.\r\n     */\r\n    async function gtagWrapper(command, ...args) {\r\n        try {\r\n            // If event, check that relevant initialization promises have completed.\r\n            if (command === \"event\" /* GtagCommand.EVENT */) {\r\n                const [measurementId, gtagParams] = args;\r\n                // If EVENT, second arg must be measurementId.\r\n                await gtagOnEvent(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementId, gtagParams);\r\n            }\r\n            else if (command === \"config\" /* GtagCommand.CONFIG */) {\r\n                const [measurementId, gtagParams] = args;\r\n                // If CONFIG, second arg must be measurementId.\r\n                await gtagOnConfig(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, measurementId, gtagParams);\r\n            }\r\n            else if (command === \"consent\" /* GtagCommand.CONSENT */) {\r\n                const [consentAction, gtagParams] = args;\r\n                // consentAction can be one of 'default' or 'update'.\r\n                gtagCore(\"consent\" /* GtagCommand.CONSENT */, consentAction, gtagParams);\r\n            }\r\n            else if (command === \"get\" /* GtagCommand.GET */) {\r\n                const [measurementId, fieldName, callback] = args;\r\n                gtagCore(\"get\" /* GtagCommand.GET */, measurementId, fieldName, callback);\r\n            }\r\n            else if (command === \"set\" /* GtagCommand.SET */) {\r\n                const [customParams] = args;\r\n                // If SET, second arg must be params.\r\n                gtagCore(\"set\" /* GtagCommand.SET */, customParams);\r\n            }\r\n            else {\r\n                gtagCore(command, ...args);\r\n            }\r\n        }\r\n        catch (e) {\r\n            logger.error(e);\r\n        }\r\n    }\r\n    return gtagWrapper;\r\n}\r\n/**\r\n * Creates global gtag function or wraps existing one if found.\r\n * This wrapped function attaches Firebase instance ID (FID) to gtag 'config' and\r\n * 'event' calls that belong to the GAID associated with this Firebase instance.\r\n *\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n * @param dataLayerName Name of global GA datalayer array.\r\n * @param gtagFunctionName Name of global gtag function (\"gtag\" if not user-specified).\r\n */\r\nfunction wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagFunctionName) {\r\n    // Create a basic core gtag function\r\n    let gtagCore = function (..._args) {\r\n        // Must push IArguments object, not an array.\r\n        window[dataLayerName].push(arguments);\r\n    };\r\n    // Replace it with existing one if found\r\n    if (window[gtagFunctionName] &&\r\n        typeof window[gtagFunctionName] === 'function') {\r\n        // @ts-ignore\r\n        gtagCore = window[gtagFunctionName];\r\n    }\r\n    window[gtagFunctionName] = wrapGtag(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId);\r\n    return {\r\n        gtagCore,\r\n        wrappedGtag: window[gtagFunctionName]\r\n    };\r\n}\r\n/**\r\n * Returns the script tag in the DOM matching both the gtag url pattern\r\n * and the provided data layer name.\r\n */\r\nfunction findGtagScriptOnPage(dataLayerName) {\r\n    const scriptTags = window.document.getElementsByTagName('script');\r\n    for (const tag of Object.values(scriptTags)) {\r\n        if (tag.src &&\r\n            tag.src.includes(GTAG_URL) &&\r\n            tag.src.includes(dataLayerName)) {\r\n            return tag;\r\n        }\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Backoff factor for 503 errors, which we want to be conservative about\r\n * to avoid overloading servers. Each retry interval will be\r\n * BASE_INTERVAL_MILLIS * LONG_RETRY_FACTOR ^ retryCount, so the second one\r\n * will be ~30 seconds (with fuzzing).\r\n */\r\nconst LONG_RETRY_FACTOR = 30;\r\n/**\r\n * Base wait interval to multiplied by backoffFactor^backoffCount.\r\n */\r\nconst BASE_INTERVAL_MILLIS = 1000;\r\n/**\r\n * Stubbable retry data storage class.\r\n */\r\nclass RetryData {\r\n    constructor(throttleMetadata = {}, intervalMillis = BASE_INTERVAL_MILLIS) {\r\n        this.throttleMetadata = throttleMetadata;\r\n        this.intervalMillis = intervalMillis;\r\n    }\r\n    getThrottleMetadata(appId) {\r\n        return this.throttleMetadata[appId];\r\n    }\r\n    setThrottleMetadata(appId, metadata) {\r\n        this.throttleMetadata[appId] = metadata;\r\n    }\r\n    deleteThrottleMetadata(appId) {\r\n        delete this.throttleMetadata[appId];\r\n    }\r\n}\r\nconst defaultRetryData = new RetryData();\r\n/**\r\n * Set GET request headers.\r\n * @param apiKey App API key.\r\n */\r\nfunction getHeaders(apiKey) {\r\n    return new Headers({\r\n        Accept: 'application/json',\r\n        'x-goog-api-key': apiKey\r\n    });\r\n}\r\n/**\r\n * Fetches dynamic config from backend.\r\n * @param app Firebase app to fetch config for.\r\n */\r\nasync function fetchDynamicConfig(appFields) {\r\n    var _a;\r\n    const { appId, apiKey } = appFields;\r\n    const request = {\r\n        method: 'GET',\r\n        headers: getHeaders(apiKey)\r\n    };\r\n    const appUrl = DYNAMIC_CONFIG_URL.replace('{app-id}', appId);\r\n    const response = await fetch(appUrl, request);\r\n    if (response.status !== 200 && response.status !== 304) {\r\n        let errorMessage = '';\r\n        try {\r\n            // Try to get any error message text from server response.\r\n            const jsonResponse = (await response.json());\r\n            if ((_a = jsonResponse.error) === null || _a === void 0 ? void 0 : _a.message) {\r\n                errorMessage = jsonResponse.error.message;\r\n            }\r\n        }\r\n        catch (_ignored) { }\r\n        throw ERROR_FACTORY.create(\"config-fetch-failed\" /* AnalyticsError.CONFIG_FETCH_FAILED */, {\r\n            httpStatus: response.status,\r\n            responseMessage: errorMessage\r\n        });\r\n    }\r\n    return response.json();\r\n}\r\n/**\r\n * Fetches dynamic config from backend, retrying if failed.\r\n * @param app Firebase app to fetch config for.\r\n */\r\nasync function fetchDynamicConfigWithRetry(app, \r\n// retryData and timeoutMillis are parameterized to allow passing a different value for testing.\r\nretryData = defaultRetryData, timeoutMillis) {\r\n    const { appId, apiKey, measurementId } = app.options;\r\n    if (!appId) {\r\n        throw ERROR_FACTORY.create(\"no-app-id\" /* AnalyticsError.NO_APP_ID */);\r\n    }\r\n    if (!apiKey) {\r\n        if (measurementId) {\r\n            return {\r\n                measurementId,\r\n                appId\r\n            };\r\n        }\r\n        throw ERROR_FACTORY.create(\"no-api-key\" /* AnalyticsError.NO_API_KEY */);\r\n    }\r\n    const throttleMetadata = retryData.getThrottleMetadata(appId) || {\r\n        backoffCount: 0,\r\n        throttleEndTimeMillis: Date.now()\r\n    };\r\n    const signal = new AnalyticsAbortSignal();\r\n    setTimeout(async () => {\r\n        // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\r\n        signal.abort();\r\n    }, timeoutMillis !== undefined ? timeoutMillis : FETCH_TIMEOUT_MILLIS);\r\n    return attemptFetchDynamicConfigWithRetry({ appId, apiKey, measurementId }, throttleMetadata, signal, retryData);\r\n}\r\n/**\r\n * Runs one retry attempt.\r\n * @param appFields Necessary app config fields.\r\n * @param throttleMetadata Ongoing metadata to determine throttling times.\r\n * @param signal Abort signal.\r\n */\r\nasync function attemptFetchDynamicConfigWithRetry(appFields, { throttleEndTimeMillis, backoffCount }, signal, retryData = defaultRetryData // for testing\r\n) {\r\n    var _a;\r\n    const { appId, measurementId } = appFields;\r\n    // Starts with a (potentially zero) timeout to support resumption from stored state.\r\n    // Ensures the throttle end time is honored if the last attempt timed out.\r\n    // Note the SDK will never make a request if the fetch timeout expires at this point.\r\n    try {\r\n        await setAbortableTimeout(signal, throttleEndTimeMillis);\r\n    }\r\n    catch (e) {\r\n        if (measurementId) {\r\n            logger.warn(`Timed out fetching this Firebase app's measurement ID from the server.` +\r\n                ` Falling back to the measurement ID ${measurementId}` +\r\n                ` provided in the \"measurementId\" field in the local Firebase config. [${e === null || e === void 0 ? void 0 : e.message}]`);\r\n            return { appId, measurementId };\r\n        }\r\n        throw e;\r\n    }\r\n    try {\r\n        const response = await fetchDynamicConfig(appFields);\r\n        // Note the SDK only clears throttle state if response is success or non-retriable.\r\n        retryData.deleteThrottleMetadata(appId);\r\n        return response;\r\n    }\r\n    catch (e) {\r\n        const error = e;\r\n        if (!isRetriableError(error)) {\r\n            retryData.deleteThrottleMetadata(appId);\r\n            if (measurementId) {\r\n                logger.warn(`Failed to fetch this Firebase app's measurement ID from the server.` +\r\n                    ` Falling back to the measurement ID ${measurementId}` +\r\n                    ` provided in the \"measurementId\" field in the local Firebase config. [${error === null || error === void 0 ? void 0 : error.message}]`);\r\n                return { appId, measurementId };\r\n            }\r\n            else {\r\n                throw e;\r\n            }\r\n        }\r\n        const backoffMillis = Number((_a = error === null || error === void 0 ? void 0 : error.customData) === null || _a === void 0 ? void 0 : _a.httpStatus) === 503\r\n            ? calculateBackoffMillis(backoffCount, retryData.intervalMillis, LONG_RETRY_FACTOR)\r\n            : calculateBackoffMillis(backoffCount, retryData.intervalMillis);\r\n        // Increments backoff state.\r\n        const throttleMetadata = {\r\n            throttleEndTimeMillis: Date.now() + backoffMillis,\r\n            backoffCount: backoffCount + 1\r\n        };\r\n        // Persists state.\r\n        retryData.setThrottleMetadata(appId, throttleMetadata);\r\n        logger.debug(`Calling attemptFetch again in ${backoffMillis} millis`);\r\n        return attemptFetchDynamicConfigWithRetry(appFields, throttleMetadata, signal, retryData);\r\n    }\r\n}\r\n/**\r\n * Supports waiting on a backoff by:\r\n *\r\n * <ul>\r\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\r\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\r\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\r\n *       request appear the same.</li>\r\n * </ul>\r\n *\r\n * <p>Visible for testing.\r\n */\r\nfunction setAbortableTimeout(signal, throttleEndTimeMillis) {\r\n    return new Promise((resolve, reject) => {\r\n        // Derives backoff from given end time, normalizing negative numbers to zero.\r\n        const backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\r\n        const timeout = setTimeout(resolve, backoffMillis);\r\n        // Adds listener, rather than sets onabort, because signal is a shared object.\r\n        signal.addEventListener(() => {\r\n            clearTimeout(timeout);\r\n            // If the request completes before this timeout, the rejection has no effect.\r\n            reject(ERROR_FACTORY.create(\"fetch-throttle\" /* AnalyticsError.FETCH_THROTTLE */, {\r\n                throttleEndTimeMillis\r\n            }));\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\r\n */\r\nfunction isRetriableError(e) {\r\n    if (!(e instanceof FirebaseError) || !e.customData) {\r\n        return false;\r\n    }\r\n    // Uses string index defined by ErrorData, which FirebaseError implements.\r\n    const httpStatus = Number(e.customData['httpStatus']);\r\n    return (httpStatus === 429 ||\r\n        httpStatus === 500 ||\r\n        httpStatus === 503 ||\r\n        httpStatus === 504);\r\n}\r\n/**\r\n * Shims a minimal AbortSignal (copied from Remote Config).\r\n *\r\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\r\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\r\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\r\n * swapped out if/when we do.\r\n */\r\nclass AnalyticsAbortSignal {\r\n    constructor() {\r\n        this.listeners = [];\r\n    }\r\n    addEventListener(listener) {\r\n        this.listeners.push(listener);\r\n    }\r\n    abort() {\r\n        this.listeners.forEach(listener => listener());\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Event parameters to set on 'gtag' during initialization.\r\n */\r\nlet defaultEventParametersForInit;\r\n/**\r\n * Logs an analytics event through the Firebase SDK.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param eventName Google Analytics event name, choose from standard list or use a custom string.\r\n * @param eventParams Analytics event parameters.\r\n */\r\nasync function logEvent$1(gtagFunction, initializationPromise, eventName, eventParams, options) {\r\n    if (options && options.global) {\r\n        gtagFunction(\"event\" /* GtagCommand.EVENT */, eventName, eventParams);\r\n        return;\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        const params = Object.assign(Object.assign({}, eventParams), { 'send_to': measurementId });\r\n        gtagFunction(\"event\" /* GtagCommand.EVENT */, eventName, params);\r\n    }\r\n}\r\n/**\r\n * Set screen_name parameter for this Google Analytics ID.\r\n *\r\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\r\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param screenName Screen name string to set.\r\n */\r\nasync function setCurrentScreen$1(gtagFunction, initializationPromise, screenName, options) {\r\n    if (options && options.global) {\r\n        gtagFunction(\"set\" /* GtagCommand.SET */, { 'screen_name': screenName });\r\n        return Promise.resolve();\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\r\n            update: true,\r\n            'screen_name': screenName\r\n        });\r\n    }\r\n}\r\n/**\r\n * Set user_id parameter for this Google Analytics ID.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param id User ID string to set\r\n */\r\nasync function setUserId$1(gtagFunction, initializationPromise, id, options) {\r\n    if (options && options.global) {\r\n        gtagFunction(\"set\" /* GtagCommand.SET */, { 'user_id': id });\r\n        return Promise.resolve();\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\r\n            update: true,\r\n            'user_id': id\r\n        });\r\n    }\r\n}\r\n/**\r\n * Set all other user properties other than user_id and screen_name.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param properties Map of user properties to set\r\n */\r\nasync function setUserProperties$1(gtagFunction, initializationPromise, properties, options) {\r\n    if (options && options.global) {\r\n        const flatProperties = {};\r\n        for (const key of Object.keys(properties)) {\r\n            // use dot notation for merge behavior in gtag.js\r\n            flatProperties[`user_properties.${key}`] = properties[key];\r\n        }\r\n        gtagFunction(\"set\" /* GtagCommand.SET */, flatProperties);\r\n        return Promise.resolve();\r\n    }\r\n    else {\r\n        const measurementId = await initializationPromise;\r\n        gtagFunction(\"config\" /* GtagCommand.CONFIG */, measurementId, {\r\n            update: true,\r\n            'user_properties': properties\r\n        });\r\n    }\r\n}\r\n/**\r\n * Retrieves a unique Google Analytics identifier for the web client.\r\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n */\r\nasync function internalGetGoogleAnalyticsClientId(gtagFunction, initializationPromise) {\r\n    const measurementId = await initializationPromise;\r\n    return new Promise((resolve, reject) => {\r\n        gtagFunction(\"get\" /* GtagCommand.GET */, measurementId, 'client_id', (clientId) => {\r\n            if (!clientId) {\r\n                reject(ERROR_FACTORY.create(\"no-client-id\" /* AnalyticsError.NO_CLIENT_ID */));\r\n            }\r\n            resolve(clientId);\r\n        });\r\n    });\r\n}\r\n/**\r\n * Set whether collection is enabled for this ID.\r\n *\r\n * @param enabled If true, collection is enabled for this ID.\r\n */\r\nasync function setAnalyticsCollectionEnabled$1(initializationPromise, enabled) {\r\n    const measurementId = await initializationPromise;\r\n    window[`ga-disable-${measurementId}`] = !enabled;\r\n}\r\n/**\r\n * Consent parameters to default to during 'gtag' initialization.\r\n */\r\nlet defaultConsentSettingsForInit;\r\n/**\r\n * Sets the variable {@link defaultConsentSettingsForInit} for use in the initialization of\r\n * analytics.\r\n *\r\n * @param consentSettings Maps the applicable end user consent state for gtag.js.\r\n */\r\nfunction _setConsentDefaultForInit(consentSettings) {\r\n    defaultConsentSettingsForInit = consentSettings;\r\n}\r\n/**\r\n * Sets the variable `defaultEventParametersForInit` for use in the initialization of\r\n * analytics.\r\n *\r\n * @param customParams Any custom params the user may pass to gtag.js.\r\n */\r\nfunction _setDefaultEventParametersForInit(customParams) {\r\n    defaultEventParametersForInit = customParams;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function validateIndexedDB() {\r\n    if (!isIndexedDBAvailable()) {\r\n        logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */, {\r\n            errorInfo: 'IndexedDB is not available in this environment.'\r\n        }).message);\r\n        return false;\r\n    }\r\n    else {\r\n        try {\r\n            await validateIndexedDBOpenable();\r\n        }\r\n        catch (e) {\r\n            logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\" /* AnalyticsError.INDEXEDDB_UNAVAILABLE */, {\r\n                errorInfo: e === null || e === void 0 ? void 0 : e.toString()\r\n            }).message);\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Initialize the analytics instance in gtag.js by calling config command with fid.\r\n *\r\n * NOTE: We combine analytics initialization and setting fid together because we want fid to be\r\n * part of the `page_view` event that's sent during the initialization\r\n * @param app Firebase app\r\n * @param gtagCore The gtag function that's not wrapped.\r\n * @param dynamicConfigPromisesList Array of all dynamic config promises.\r\n * @param measurementIdToAppId Maps measurementID to appID.\r\n * @param installations _FirebaseInstallationsInternal instance.\r\n *\r\n * @returns Measurement ID.\r\n */\r\nasync function _initializeAnalytics(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCore, dataLayerName, options) {\r\n    var _a;\r\n    const dynamicConfigPromise = fetchDynamicConfigWithRetry(app);\r\n    // Once fetched, map measurementIds to appId, for ease of lookup in wrapped gtag function.\r\n    dynamicConfigPromise\r\n        .then(config => {\r\n        measurementIdToAppId[config.measurementId] = config.appId;\r\n        if (app.options.measurementId &&\r\n            config.measurementId !== app.options.measurementId) {\r\n            logger.warn(`The measurement ID in the local Firebase config (${app.options.measurementId})` +\r\n                ` does not match the measurement ID fetched from the server (${config.measurementId}).` +\r\n                ` To ensure analytics events are always sent to the correct Analytics property,` +\r\n                ` update the` +\r\n                ` measurement ID field in the local config or remove it from the local config.`);\r\n        }\r\n    })\r\n        .catch(e => logger.error(e));\r\n    // Add to list to track state of all dynamic config promises.\r\n    dynamicConfigPromisesList.push(dynamicConfigPromise);\r\n    const fidPromise = validateIndexedDB().then(envIsValid => {\r\n        if (envIsValid) {\r\n            return installations.getId();\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    });\r\n    const [dynamicConfig, fid] = await Promise.all([\r\n        dynamicConfigPromise,\r\n        fidPromise\r\n    ]);\r\n    // Detect if user has already put the gtag <script> tag on this page with the passed in\r\n    // data layer name.\r\n    if (!findGtagScriptOnPage(dataLayerName)) {\r\n        insertScriptTag(dataLayerName, dynamicConfig.measurementId);\r\n    }\r\n    // Detects if there are consent settings that need to be configured.\r\n    if (defaultConsentSettingsForInit) {\r\n        gtagCore(\"consent\" /* GtagCommand.CONSENT */, 'default', defaultConsentSettingsForInit);\r\n        _setConsentDefaultForInit(undefined);\r\n    }\r\n    // This command initializes gtag.js and only needs to be called once for the entire web app,\r\n    // but since it is idempotent, we can call it multiple times.\r\n    // We keep it together with other initialization logic for better code structure.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    gtagCore('js', new Date());\r\n    // User config added first. We don't want users to accidentally overwrite\r\n    // base Firebase config properties.\r\n    const configProperties = (_a = options === null || options === void 0 ? void 0 : options.config) !== null && _a !== void 0 ? _a : {};\r\n    // guard against developers accidentally setting properties with prefix `firebase_`\r\n    configProperties[ORIGIN_KEY] = 'firebase';\r\n    configProperties.update = true;\r\n    if (fid != null) {\r\n        configProperties[GA_FID_KEY] = fid;\r\n    }\r\n    // It should be the first config command called on this GA-ID\r\n    // Initialize this GA-ID and set FID on it using the gtag config API.\r\n    // Note: This will trigger a page_view event unless 'send_page_view' is set to false in\r\n    // `configProperties`.\r\n    gtagCore(\"config\" /* GtagCommand.CONFIG */, dynamicConfig.measurementId, configProperties);\r\n    // Detects if there is data that will be set on every event logged from the SDK.\r\n    if (defaultEventParametersForInit) {\r\n        gtagCore(\"set\" /* GtagCommand.SET */, defaultEventParametersForInit);\r\n        _setDefaultEventParametersForInit(undefined);\r\n    }\r\n    return dynamicConfig.measurementId;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Analytics Service class.\r\n */\r\nclass AnalyticsService {\r\n    constructor(app) {\r\n        this.app = app;\r\n    }\r\n    _delete() {\r\n        delete initializationPromisesMap[this.app.options.appId];\r\n        return Promise.resolve();\r\n    }\r\n}\r\n/**\r\n * Maps appId to full initialization promise. Wrapped gtag calls must wait on\r\n * all or some of these, depending on the call's `send_to` param and the status\r\n * of the dynamic config fetches (see below).\r\n */\r\nlet initializationPromisesMap = {};\r\n/**\r\n * List of dynamic config fetch promises. In certain cases, wrapped gtag calls\r\n * wait on all these to be complete in order to determine if it can selectively\r\n * wait for only certain initialization (FID) promises or if it must wait for all.\r\n */\r\nlet dynamicConfigPromisesList = [];\r\n/**\r\n * Maps fetched measurementIds to appId. Populated when the app's dynamic config\r\n * fetch completes. If already populated, gtag config calls can use this to\r\n * selectively wait for only this app's initialization promise (FID) instead of all\r\n * initialization promises.\r\n */\r\nconst measurementIdToAppId = {};\r\n/**\r\n * Name for window global data layer array used by GA: defaults to 'dataLayer'.\r\n */\r\nlet dataLayerName = 'dataLayer';\r\n/**\r\n * Name for window global gtag function used by GA: defaults to 'gtag'.\r\n */\r\nlet gtagName = 'gtag';\r\n/**\r\n * Reproduction of standard gtag function or reference to existing\r\n * gtag function on window object.\r\n */\r\nlet gtagCoreFunction;\r\n/**\r\n * Wrapper around gtag function that ensures FID is sent with all\r\n * relevant event and config calls.\r\n */\r\nlet wrappedGtagFunction;\r\n/**\r\n * Flag to ensure page initialization steps (creation or wrapping of\r\n * dataLayer and gtag script) are only run once per page load.\r\n */\r\nlet globalInitDone = false;\r\n/**\r\n * Configures Firebase Analytics to use custom `gtag` or `dataLayer` names.\r\n * Intended to be used if `gtag.js` script has been installed on\r\n * this page independently of Firebase Analytics, and is using non-default\r\n * names for either the `gtag` function or for `dataLayer`.\r\n * Must be called before calling `getAnalytics()` or it won't\r\n * have any effect.\r\n *\r\n * @public\r\n *\r\n * @param options - Custom gtag and dataLayer names.\r\n */\r\nfunction settings(options) {\r\n    if (globalInitDone) {\r\n        throw ERROR_FACTORY.create(\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */);\r\n    }\r\n    if (options.dataLayerName) {\r\n        dataLayerName = options.dataLayerName;\r\n    }\r\n    if (options.gtagName) {\r\n        gtagName = options.gtagName;\r\n    }\r\n}\r\n/**\r\n * Returns true if no environment mismatch is found.\r\n * If environment mismatches are found, throws an INVALID_ANALYTICS_CONTEXT\r\n * error that also lists details for each mismatch found.\r\n */\r\nfunction warnOnBrowserContextMismatch() {\r\n    const mismatchedEnvMessages = [];\r\n    if (isBrowserExtension()) {\r\n        mismatchedEnvMessages.push('This is a browser extension environment.');\r\n    }\r\n    if (!areCookiesEnabled()) {\r\n        mismatchedEnvMessages.push('Cookies are not available.');\r\n    }\r\n    if (mismatchedEnvMessages.length > 0) {\r\n        const details = mismatchedEnvMessages\r\n            .map((message, index) => `(${index + 1}) ${message}`)\r\n            .join(' ');\r\n        const err = ERROR_FACTORY.create(\"invalid-analytics-context\" /* AnalyticsError.INVALID_ANALYTICS_CONTEXT */, {\r\n            errorInfo: details\r\n        });\r\n        logger.warn(err.message);\r\n    }\r\n}\r\n/**\r\n * Analytics instance factory.\r\n * @internal\r\n */\r\nfunction factory(app, installations, options) {\r\n    warnOnBrowserContextMismatch();\r\n    const appId = app.options.appId;\r\n    if (!appId) {\r\n        throw ERROR_FACTORY.create(\"no-app-id\" /* AnalyticsError.NO_APP_ID */);\r\n    }\r\n    if (!app.options.apiKey) {\r\n        if (app.options.measurementId) {\r\n            logger.warn(`The \"apiKey\" field is empty in the local Firebase config. This is needed to fetch the latest` +\r\n                ` measurement ID for this Firebase app. Falling back to the measurement ID ${app.options.measurementId}` +\r\n                ` provided in the \"measurementId\" field in the local Firebase config.`);\r\n        }\r\n        else {\r\n            throw ERROR_FACTORY.create(\"no-api-key\" /* AnalyticsError.NO_API_KEY */);\r\n        }\r\n    }\r\n    if (initializationPromisesMap[appId] != null) {\r\n        throw ERROR_FACTORY.create(\"already-exists\" /* AnalyticsError.ALREADY_EXISTS */, {\r\n            id: appId\r\n        });\r\n    }\r\n    if (!globalInitDone) {\r\n        // Steps here should only be done once per page: creation or wrapping\r\n        // of dataLayer and global gtag function.\r\n        getOrCreateDataLayer(dataLayerName);\r\n        const { wrappedGtag, gtagCore } = wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagName);\r\n        wrappedGtagFunction = wrappedGtag;\r\n        gtagCoreFunction = gtagCore;\r\n        globalInitDone = true;\r\n    }\r\n    // Async but non-blocking.\r\n    // This map reflects the completion state of all promises for each appId.\r\n    initializationPromisesMap[appId] = _initializeAnalytics(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCoreFunction, dataLayerName, options);\r\n    const analyticsInstance = new AnalyticsService(app);\r\n    return analyticsInstance;\r\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/**\r\n * Returns an {@link Analytics} instance for the given app.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\r\nfunction getAnalytics(app = getApp()) {\r\n    app = getModularInstance(app);\r\n    // Dependencies\r\n    const analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\r\n    if (analyticsProvider.isInitialized()) {\r\n        return analyticsProvider.getImmediate();\r\n    }\r\n    return initializeAnalytics(app);\r\n}\r\n/**\r\n * Returns an {@link Analytics} instance for the given app.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\r\nfunction initializeAnalytics(app, options = {}) {\r\n    // Dependencies\r\n    const analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\r\n    if (analyticsProvider.isInitialized()) {\r\n        const existingInstance = analyticsProvider.getImmediate();\r\n        if (deepEqual(options, analyticsProvider.getOptions())) {\r\n            return existingInstance;\r\n        }\r\n        else {\r\n            throw ERROR_FACTORY.create(\"already-initialized\" /* AnalyticsError.ALREADY_INITIALIZED */);\r\n        }\r\n    }\r\n    const analyticsInstance = analyticsProvider.initialize({ options });\r\n    return analyticsInstance;\r\n}\r\n/**\r\n * This is a public static method provided to users that wraps four different checks:\r\n *\r\n * 1. Check if it's not a browser extension environment.\r\n * 2. Check if cookies are enabled in current browser.\r\n * 3. Check if IndexedDB is supported by the browser environment.\r\n * 4. Check if the current browser context is valid for using `IndexedDB.open()`.\r\n *\r\n * @public\r\n *\r\n */\r\nasync function isSupported() {\r\n    if (isBrowserExtension()) {\r\n        return false;\r\n    }\r\n    if (!areCookiesEnabled()) {\r\n        return false;\r\n    }\r\n    if (!isIndexedDBAvailable()) {\r\n        return false;\r\n    }\r\n    try {\r\n        const isDBOpenable = await validateIndexedDBOpenable();\r\n        return isDBOpenable;\r\n    }\r\n    catch (error) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Use gtag `config` command to set `screen_name`.\r\n *\r\n * @public\r\n *\r\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\r\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param screenName - Screen name to set.\r\n */\r\nfunction setCurrentScreen(analyticsInstance, screenName, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setCurrentScreen$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], screenName, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Retrieves a unique Google Analytics identifier for the web client.\r\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\r\nasync function getGoogleAnalyticsClientId(analyticsInstance) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    return internalGetGoogleAnalyticsClientId(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId]);\r\n}\r\n/**\r\n * Use gtag `config` command to set `user_id`.\r\n *\r\n * @public\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param id - User ID to set.\r\n */\r\nfunction setUserId(analyticsInstance, id, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setUserId$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], id, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Use gtag `config` command to set all params specified.\r\n *\r\n * @public\r\n */\r\nfunction setUserProperties(analyticsInstance, properties, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setUserProperties$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], properties, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Sets whether Google Analytics collection is enabled for this app on this device.\r\n * Sets global `window['ga-disable-analyticsId'] = true;`\r\n *\r\n * @public\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param enabled - If true, enables collection, if false, disables it.\r\n */\r\nfunction setAnalyticsCollectionEnabled(analyticsInstance, enabled) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    setAnalyticsCollectionEnabled$1(initializationPromisesMap[analyticsInstance.app.options.appId], enabled).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Adds data that will be set on every event logged from the SDK, including automatic ones.\r\n * With gtag's \"set\" command, the values passed persist on the current page and are passed with\r\n * all subsequent events.\r\n * @public\r\n * @param customParams - Any custom params the user may pass to gtag.js.\r\n */\r\nfunction setDefaultEventParameters(customParams) {\r\n    // Check if reference to existing gtag function on window object exists\r\n    if (wrappedGtagFunction) {\r\n        wrappedGtagFunction(\"set\" /* GtagCommand.SET */, customParams);\r\n    }\r\n    else {\r\n        _setDefaultEventParametersForInit(customParams);\r\n    }\r\n}\r\n/**\r\n * Sends a Google Analytics event with given `eventParams`. This method\r\n * automatically associates this logged event with this Firebase web\r\n * app instance on this device.\r\n * List of official event parameters can be found in the gtag.js\r\n * reference documentation:\r\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\r\n * | the GA4 reference documentation}.\r\n *\r\n * @public\r\n */\r\nfunction logEvent(analyticsInstance, eventName, eventParams, options) {\r\n    analyticsInstance = getModularInstance(analyticsInstance);\r\n    logEvent$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], eventName, eventParams, options).catch(e => logger.error(e));\r\n}\r\n/**\r\n * Sets the applicable end user consent state for this web app across all gtag references once\r\n * Firebase Analytics is initialized.\r\n *\r\n * Use the {@link ConsentSettings} to specify individual consent type values. By default consent\r\n * types are set to \"granted\".\r\n * @public\r\n * @param consentSettings - Maps the applicable end user consent state for gtag.js.\r\n */\r\nfunction setConsent(consentSettings) {\r\n    // Check if reference to existing gtag function on window object exists\r\n    if (wrappedGtagFunction) {\r\n        wrappedGtagFunction(\"consent\" /* GtagCommand.CONSENT */, 'update', consentSettings);\r\n    }\r\n    else {\r\n        _setConsentDefaultForInit(consentSettings);\r\n    }\r\n}\n\nconst name = \"@firebase/analytics\";\nconst version = \"0.10.8\";\n\n/**\r\n * The Firebase Analytics Web SDK.\r\n * This SDK does not work in a Node.js environment.\r\n *\r\n * @packageDocumentation\r\n */\r\nfunction registerAnalytics() {\r\n    _registerComponent(new Component(ANALYTICS_TYPE, (container, { options: analyticsOptions }) => {\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app').getImmediate();\r\n        const installations = container\r\n            .getProvider('installations-internal')\r\n            .getImmediate();\r\n        return factory(app, installations, analyticsOptions);\r\n    }, \"PUBLIC\" /* ComponentType.PUBLIC */));\r\n    _registerComponent(new Component('analytics-internal', internalFactory, \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n    registerVersion(name, version);\r\n    // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\n    registerVersion(name, version, 'esm2017');\r\n    function internalFactory(container) {\r\n        try {\r\n            const analytics = container.getProvider(ANALYTICS_TYPE).getImmediate();\r\n            return {\r\n                logEvent: (eventName, eventParams, options) => logEvent(analytics, eventName, eventParams, options)\r\n            };\r\n        }\r\n        catch (e) {\r\n            throw ERROR_FACTORY.create(\"interop-component-reg-failed\" /* AnalyticsError.INTEROP_COMPONENT_REG_FAILED */, {\r\n                reason: e\r\n            });\r\n        }\r\n    }\r\n}\r\nregisterAnalytics();\n\nexport { getAnalytics, getGoogleAnalyticsClientId, initializeAnalytics, isSupported, logEvent, setAnalyticsCollectionEnabled, setConsent, setCurrentScreen, setDefaultEventParameters, setUserId, setUserProperties, settings };\n//# sourceMappingURL=index.esm2017.js.map\n","import { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\nimport { getAnalytics, isSupported } from 'firebase/analytics';\n\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: import.meta.env.VITE_FIREBASE_APP_ID,\n  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID\n};\n\n// Initialize Firebase only if it hasn't been initialized already\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApp();\n\n// Initialize services\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\n\n// Initialize Analytics conditionally\nexport const initializeAnalytics = async () => {\n  try {\n    const analyticsSupported = await isSupported();\n    if (analyticsSupported) {\n      return getAnalytics(app);\n    }\n    return null;\n  } catch (error) {\n    console.warn('Analytics initialization failed:', error);\n    return null;\n  }\n};\n\nexport default app;","import { collection, query, where, orderBy, getDocs, DocumentData } from 'firebase/firestore';\nimport { db } from './config';\nimport { AudioSegment } from '../../types/audio';\n\nexport const fetchUserRecordings = async (userId: string): Promise<AudioSegment[]> => {\n  try {\n    const q = query(\n      collection(db, 'recordings'),\n      where('userId', '==', userId),\n      where('type', '==', 'audio'),\n      orderBy('timestamp', 'desc')\n    );\n\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data(),\n      timestamp: doc.data().timestamp,\n      duration: doc.data().duration\n    })) as AudioSegment[];\n  } catch (error) {\n    console.error('Error fetching recordings:', error);\n    throw new Error('Failed to fetch recordings');\n  }\n};\n\nexport const processRecordingMetadata = (doc: DocumentData): AudioSegment => {\n  return {\n    id: doc.id,\n    url: doc.data().url,\n    timestamp: doc.data().timestamp,\n    duration: doc.data().duration,\n    userId: doc.data().userId\n  };\n};","import { useState, useEffect } from 'react';\nimport { fetchUserRecordings } from '../services/firebase/recordings';\nimport { AudioSegment } from '../types/audio';\nimport { useAuth } from '../store/authStore';\nimport toast from 'react-hot-toast';\n\nexport function useRecordings() {\n  const [recordings, setRecordings] = useState<AudioSegment[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    const loadRecordings = async () => {\n      if (!user?.id) return;\n      \n      try {\n        setIsLoading(true);\n        setError(null);\n        const fetchedRecordings = await fetchUserRecordings(user.id);\n        setRecordings(fetchedRecordings);\n      } catch (err) {\n        const errorMessage = err instanceof Error ? err.message : 'Failed to load recordings';\n        setError(errorMessage);\n        toast.error(errorMessage);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadRecordings();\n  }, [user?.id]);\n\n  const refreshRecordings = async () => {\n    if (!user?.id) return;\n    \n    try {\n      const fetchedRecordings = await fetchUserRecordings(user.id);\n      setRecordings(fetchedRecordings);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to refresh recordings';\n      toast.error(errorMessage);\n    }\n  };\n\n  return {\n    recordings,\n    isLoading,\n    error,\n    refreshRecordings\n  };\n}","import React from 'react';\nimport { FileText } from 'lucide-react';\n\ninterface TranscriptViewProps {\n  transcript?: string;\n  isLoading?: boolean;\n}\n\nexport function TranscriptView({ transcript, isLoading }: TranscriptViewProps) {\n  if (isLoading) {\n    return (\n      <div className=\"mt-2 text-sm text-gray-500 animate-pulse\">\n        Generating transcript...\n      </div>\n    );\n  }\n\n  if (!transcript) {\n    return (\n      <div className=\"mt-2 text-sm text-gray-500 flex items-center gap-1\">\n        <FileText className=\"h-4 w-4\" />\n        No transcript available\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-2 p-3 bg-gray-50 rounded-lg\">\n      <div className=\"flex items-center gap-2 mb-1\">\n        <FileText className=\"h-4 w-4 text-gray-600\" />\n        <span className=\"text-sm font-medium text-gray-600\">Transcript</span>\n      </div>\n      <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">{transcript}</p>\n    </div>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport { \n  Play, Pause, Lock, RefreshCw, Download,\n  MapPin, Mic, Radio, Settings, Bell\n} from 'lucide-react';\nimport { AudioSegment } from '../types/audio';\nimport { useAuth } from '../store/authStore';\nimport { useSettingsStore } from '../store/settingsStore';\nimport { useRecordings } from '../hooks/useRecordings';\nimport { TranscriptView } from './recording/TranscriptView';\nimport { DailyQuote } from './DailyQuote';\nimport { HaloIcon } from './icons/HaloIcon';\nimport { transcribeAudio } from '../services/firebase/transcription';\nimport toast from 'react-hot-toast';\n\nexport function ParentDashboard() {\n  const [currentAudio, setCurrentAudio] = useState<HTMLAudioElement | null>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [newPin, setNewPin] = useState('');\n  const [isLiveMonitoring, setIsLiveMonitoring] = useState(false);\n  const [isLocationTracking, setIsLocationTracking] = useState(false);\n  const { user } = useAuth();\n  const { stopPin, setStopPin } = useSettingsStore();\n  const { recordings, isLoading, refreshRecordings } = useRecordings();\n\n  const toggleLiveMonitoring = () => {\n    setIsLiveMonitoring(!isLiveMonitoring);\n    toast.success(\n      !isLiveMonitoring ? 'Live audio monitoring enabled' : 'Live audio monitoring disabled'\n    );\n  };\n\n  const toggleLocationTracking = () => {\n    setIsLocationTracking(!isLocationTracking);\n    toast.success(\n      !isLocationTracking ? 'Location tracking enabled' : 'Location tracking disabled'\n    );\n  };\n\n  // Rest of the existing functions...\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50\">\n      <div className=\"max-w-7xl mx-auto p-6\">\n        {/* Header Section */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2\">\n            Guardian Dashboard\n          </h1>\n          <p className=\"text-gray-600\">Protecting what matters most</p>\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n          <div className=\"bg-white rounded-2xl shadow-xl p-6 backdrop-blur-sm bg-white/80\n                        border-2 border-transparent hover:border-indigo-100 transition-colors\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-3 bg-indigo-50 rounded-xl\">\n                  <Radio className=\"h-6 w-6 text-indigo-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">Live Monitoring</h3>\n                  <p className=\"text-sm text-gray-500\">Real-time audio feed</p>\n                </div>\n              </div>\n              <button\n                onClick={toggleLiveMonitoring}\n                className={`p-2 rounded-xl transition-colors ${\n                  isLiveMonitoring \n                    ? 'bg-indigo-600 text-white' \n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n              >\n                <Mic className=\"h-5 w-5\" />\n              </button>\n            </div>\n            <div className=\"h-24 bg-gray-50 rounded-xl flex items-center justify-center\">\n              {isLiveMonitoring ? (\n                <div className=\"flex items-center gap-2 text-indigo-600\">\n                  <span className=\"w-2 h-2 bg-indigo-600 rounded-full animate-pulse\" />\n                  Live Monitoring Active\n                </div>\n              ) : (\n                <span className=\"text-gray-400\">Monitoring Inactive</span>\n              )}\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-2xl shadow-xl p-6 backdrop-blur-sm bg-white/80\n                        border-2 border-transparent hover:border-indigo-100 transition-colors\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-3 bg-green-50 rounded-xl\">\n                  <MapPin className=\"h-6 w-6 text-green-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">Location Tracking</h3>\n                  <p className=\"text-sm text-gray-500\">Real-time location updates</p>\n                </div>\n              </div>\n              <button\n                onClick={toggleLocationTracking}\n                className={`p-2 rounded-xl transition-colors ${\n                  isLocationTracking \n                    ? 'bg-green-600 text-white' \n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n              >\n                <Settings className=\"h-5 w-5\" />\n              </button>\n            </div>\n            <div className=\"h-24 bg-gray-50 rounded-xl flex items-center justify-center\">\n              {isLocationTracking ? (\n                <div className=\"flex items-center gap-2 text-green-600\">\n                  <span className=\"w-2 h-2 bg-green-600 rounded-full animate-pulse\" />\n                  Location Tracking Active\n                </div>\n              ) : (\n                <span className=\"text-gray-400\">Tracking Inactive</span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Security Settings */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 mb-8 backdrop-blur-sm bg-white/80\">\n          <h2 className=\"text-xl font-bold mb-6 flex items-center gap-2 text-indigo-700\">\n            <HaloIcon className=\"h-6 w-6\" />\n            Security Settings\n          </h2>\n          <form onSubmit={handleSetPin} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Stop Recording PIN\n              </label>\n              <div className=\"flex gap-4\">\n                <input\n                  type=\"password\"\n                  value={newPin}\n                  onChange={(e) => setNewPin(e.target.value)}\n                  placeholder=\"Enter 4-digit PIN\"\n                  className=\"flex-grow px-4 py-2 border-2 border-gray-200 rounded-xl\n                           focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200\n                           transition-all duration-200\"\n                  maxLength={4}\n                  pattern=\"[0-9]*\"\n                  inputMode=\"numeric\"\n                />\n                <button\n                  type=\"submit\"\n                  className=\"px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-500\n                           text-white rounded-xl font-medium\n                           hover:from-indigo-600 hover:to-purple-600\n                           transform transition-all duration-200\n                           hover:shadow-lg active:scale-95\"\n                >\n                  Set PIN\n                </button>\n              </div>\n            </div>\n            {!stopPin && (\n              <p className=\"text-red-500 text-sm flex items-center gap-1\">\n                <Lock className=\"h-4 w-4\" />\n                Please set a PIN to protect the stop recording function\n              </p>\n            )}\n          </form>\n        </div>\n\n        {/* Recordings Section */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 backdrop-blur-sm bg-white/80\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-bold text-indigo-700\">Recordings</h2>\n            <button\n              onClick={refreshRecordings}\n              className=\"p-2 rounded-full hover:bg-indigo-50 transition-colors\"\n              title=\"Refresh recordings\"\n            >\n              <RefreshCw className=\"h-5 w-5 text-indigo-600\" />\n            </button>\n          </div>\n          \n          <div className=\"space-y-4\">\n            {isLoading ? (\n              <div className=\"text-center py-12 text-gray-500\">\n                Loading recordings...\n              </div>\n            ) : recordings.length === 0 ? (\n              <div className=\"text-center py-12 text-gray-500\">\n                No recordings available\n              </div>\n            ) : (\n              recordings.map((recording) => (\n                <div\n                  key={recording.id}\n                  className=\"bg-white rounded-xl shadow-sm p-4 flex flex-col\n                           border-2 border-gray-50 hover:border-indigo-100 transition-colors\"\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <p className=\"font-medium text-gray-900\">\n                        {format(recording.timestamp, 'PPpp')}\n                      </p>\n                      <p className=\"text-sm text-gray-500\">\n                        Duration: {Math.round(recording.duration / 60000)} minutes\n                      </p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        onClick={() => togglePlay(recording.url)}\n                        className=\"p-2 rounded-full hover:bg-indigo-50 transition-colors\"\n                      >\n                        {isPlaying ? (\n                          <Pause className=\"h-6 w-6 text-indigo-600\" />\n                        ) : (\n                          <Play className=\"h-6 w-6 text-indigo-600\" />\n                        )}\n                      </button>\n                      {recording.transcript && (\n                        <button\n                          onClick={() => handleDownloadTranscript(recording)}\n                          className=\"p-2 rounded-full hover:bg-green-50 transition-colors\"\n                          title=\"Download transcript\"\n                        >\n                          <Download className=\"h-5 w-5 text-green-600\" />\n                        </button>\n                      )}\n                      {!recording.transcript && (\n                        <button\n                          onClick={() => handleTranscribe(recording)}\n                          className=\"px-3 py-1 text-sm bg-indigo-50 text-indigo-600 rounded-full\n                                   hover:bg-indigo-100 transition-colors\"\n                        >\n                          Transcribe\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <TranscriptView\n                    transcript={recording.transcript}\n                    isLoading={false}\n                  />\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        {/* Daily Quote */}\n        <div className=\"mt-8\">\n          <DailyQuote />\n        </div>\n      </div>\n    </div>\n  );\n}","import { \n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut as firebaseSignOut,\n  onAuthStateChanged,\n  User as FirebaseUser,\n  AuthError\n} from 'firebase/auth';\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\nimport { auth, db } from './config';\nimport { User } from '../../types/audio';\nimport { useAuth } from '../../store/authStore';\n\nexport const signIn = async (email: string, password: string): Promise<User> => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    const userDoc = await getDoc(doc(db, 'users', userCredential.user.uid));\n    if (!userDoc.exists()) {\n      throw new Error('User data not found');\n    }\n    const userData = userDoc.data() as User;\n    useAuth.getState().setUser(userData);\n    return userData;\n  } catch (error) {\n    const authError = error as AuthError;\n    console.error('Sign in error:', authError);\n    throw new Error(authError.code === 'auth/invalid-credential' \n      ? 'Invalid email or password'\n      : 'Failed to sign in');\n  }\n};\n\nexport const signUp = async (\n  email: string,\n  password: string,\n  name: string,\n  role: 'parent' | 'guardian'\n): Promise<User> => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user: User = {\n      id: userCredential.user.uid,\n      email,\n      name,\n      role\n    };\n\n    await setDoc(doc(db, 'users', user.id), user);\n    useAuth.getState().setUser(user);\n    return user;\n  } catch (error) {\n    console.error('Sign up error:', error);\n    throw new Error('Failed to create account');\n  }\n};\n\nexport const signOut = async (): Promise<void> => {\n  try {\n    await firebaseSignOut(auth);\n    useAuth.getState().setUser(null);\n  } catch (error) {\n    console.error('Sign out error:', error);\n    throw new Error('Failed to sign out');\n  }\n};\n\nexport const initializeAuth = (): void => {\n  onAuthStateChanged(auth, async (firebaseUser: FirebaseUser | null) => {\n    if (firebaseUser) {\n      try {\n        const userDoc = await getDoc(doc(db, 'users', firebaseUser.uid));\n        if (userDoc.exists()) {\n          const user = userDoc.data() as User;\n          useAuth.getState().setUser(user);\n        }\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n        useAuth.getState().setUser(null);\n      }\n    } else {\n      useAuth.getState().setUser(null);\n    }\n  });\n};","import React, { useState } from 'react';\nimport { LogIn } from 'lucide-react';\nimport { signIn } from '../../services/firebase/auth';\nimport { toast } from 'react-hot-toast';\n\nexport function LoginForm() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await signIn(email, password);\n      toast.success('Welcome back!');\n    } catch (error) {\n      toast.error('Invalid email or password');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-md\">\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n            Email\n          </label>\n          <input\n            id=\"email\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"mt-1 block w-full rounded-lg border-gray-300 shadow-sm\n                     focus:border-indigo-500 focus:ring-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n            Password\n          </label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"mt-1 block w-full rounded-lg border-gray-300 shadow-sm\n                     focus:border-indigo-500 focus:ring-indigo-500\"\n            required\n          />\n        </div>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"w-full flex justify-center items-center gap-2 py-2 px-4\n                   bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg\n                   focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\n                   disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {isLoading ? (\n            'Signing in...'\n          ) : (\n            <>\n              <LogIn className=\"h-5 w-5\" />\n              Sign In\n            </>\n          )}\n        </button>\n      </form>\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { UserPlus } from 'lucide-react';\nimport { signUp } from '../../services/firebase/auth';\nimport { toast } from 'react-hot-toast';\n\nexport function SignupForm() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [role, setRole] = useState<'parent' | 'guardian'>('parent');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await signUp(email, password, name, role);\n      toast.success('Account created successfully!');\n    } catch (error) {\n      toast.error('Failed to create account');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-md\">\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">\n            Name\n          </label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            className=\"mt-1 block w-full rounded-lg border-gray-300 shadow-sm\n                     focus:border-indigo-500 focus:ring-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n            Email\n          </label>\n          <input\n            id=\"email\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"mt-1 block w-full rounded-lg border-gray-300 shadow-sm\n                     focus:border-indigo-500 focus:ring-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n            Password\n          </label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"mt-1 block w-full rounded-lg border-gray-300 shadow-sm\n                     focus:border-indigo-500 focus:ring-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700\">Role</label>\n          <div className=\"mt-1 space-x-4\">\n            <label className=\"inline-flex items-center\">\n              <input\n                type=\"radio\"\n                value=\"parent\"\n                checked={role === 'parent'}\n                onChange={(e) => setRole(e.target.value as 'parent')}\n                className=\"form-radio text-indigo-600\"\n              />\n              <span className=\"ml-2\">Parent</span>\n            </label>\n            <label className=\"inline-flex items-center\">\n              <input\n                type=\"radio\"\n                value=\"guardian\"\n                checked={role === 'guardian'}\n                onChange={(e) => setRole(e.target.value as 'guardian')}\n                className=\"form-radio text-indigo-600\"\n              />\n              <span className=\"ml-2\">Guardian</span>\n            </label>\n          </div>\n        </div>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"w-full flex justify-center items-center gap-2 py-2 px-4\n                   bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg\n                   focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\n                   disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {isLoading ? (\n            'Creating account...'\n          ) : (\n            <>\n              <UserPlus className=\"h-5 w-5\" />\n              Sign Up\n            </>\n          )}\n        </button>\n      </form>\n    </div>\n  );\n}","import React from 'react';\nimport { EyeOff } from 'lucide-react';\nimport { useAuth } from '../../store/authStore';\nimport { toast } from 'react-hot-toast';\n\nexport function AnonymousMode() {\n  const { setAnonymous } = useAuth();\n\n  const handleAnonymousAccess = () => {\n    setAnonymous(true);\n    toast.success('Entered anonymous mode');\n  };\n\n  return (\n    <div className=\"mt-6 pt-6 border-t border-gray-200\">\n      <button\n        onClick={handleAnonymousAccess}\n        className=\"w-full flex justify-center items-center gap-2 py-2 px-4\n                 bg-gray-600 hover:bg-gray-700 text-white rounded-lg\n                 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\n                 transition-colors\"\n      >\n        <EyeOff className=\"h-5 w-5\" />\n        Continue Anonymously\n      </button>\n      <p className=\"mt-2 text-xs text-center text-gray-500\">\n        Access basic features without an account. Some features may be limited.\n      </p>\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { LoginForm } from './LoginForm';\nimport { SignupForm } from './SignupForm';\nimport { AnonymousMode } from './AnonymousMode';\nimport { HaloIcon } from '../icons/HaloIcon';\nimport { CartoonElements } from '../decorations/CartoonElements';\n\nexport function AuthPage() {\n  const [isLogin, setIsLogin] = useState(true);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500\">\n      <CartoonElements />\n      \n      <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxwYXRoIGQ9Ik0tMTAgMTBsMjAgLTIwTTAgMGwyMCAtMjBNMTAgMTBsMjAgLTIwIiBzdHJva2U9IiNmZmZmZmYyMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm4pIi8+PC9zdmc+')] opacity-30\"></div>\n      \n      <div className=\"relative min-h-screen flex flex-col items-center justify-center p-4\">\n        <div className=\"text-center mb-8\">\n          <div className=\"flex justify-center mb-4\">\n            <HaloIcon />\n          </div>\n          <h1 className=\"text-4xl font-bold text-white mb-2\">\n            Chaperone\n          </h1>\n          <p className=\"text-white/90\">Your Digital Guardian</p>\n        </div>\n\n        <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-8 w-full max-w-md\">\n          <div className=\"flex justify-center mb-8\">\n            <div className=\"inline-flex rounded-lg bg-gray-100 p-1\">\n              <button\n                onClick={() => setIsLogin(true)}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors\n                          ${isLogin \n                            ? 'bg-white text-gray-900 shadow' \n                            : 'text-gray-500 hover:text-gray-900'}`}\n              >\n                Sign In\n              </button>\n              <button\n                onClick={() => setIsLogin(false)}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors\n                          ${!isLogin \n                            ? 'bg-white text-gray-900 shadow' \n                            : 'text-gray-500 hover:text-gray-900'}`}\n              >\n                Sign Up\n              </button>\n            </div>\n          </div>\n\n          {isLogin ? <LoginForm /> : <SignupForm />}\n          <AnonymousMode />\n        </div>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport { Layout } from './components/layout/Layout';\nimport { ChildRecorder } from './components/ChildRecorder';\nimport { ParentDashboard } from './components/ParentDashboard';\nimport { AuthPage } from './components/auth/AuthPage';\nimport { useAuth } from './store/authStore';\nimport { Toaster } from 'react-hot-toast';\n\nfunction App() {\n  const { user, isAuthenticated, isAnonymous } = useAuth();\n\n  if (!isAuthenticated && !isAnonymous) {\n    return (\n      <>\n        <Toaster position=\"top-center\" />\n        <AuthPage />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Toaster position=\"top-center\" />\n      <Layout>\n        {isAnonymous || user?.role === 'guardian' ? (\n          <ChildRecorder />\n        ) : (\n          <ParentDashboard />\n        )}\n      </Layout>\n    </>\n  );\n}\n\nexport default App;","import { db } from './config';\nimport { collection, query, where, getDocs, DocumentData } from 'firebase/firestore';\n\nclass DataConnect {\n  private static instance: DataConnect;\n  \n  private constructor() {}\n  \n  static getInstance(): DataConnect {\n    if (!DataConnect.instance) {\n      DataConnect.instance = new DataConnect();\n    }\n    return DataConnect.instance;\n  }\n\n  async initializeConnection(): Promise<boolean> {\n    try {\n      const systemRef = collection(db, 'system');\n      const statusQuery = query(systemRef, where('status', '==', 'active'));\n      const snapshot = await getDocs(statusQuery);\n      return !snapshot.empty;\n    } catch (error) {\n      console.error('Error initializing Data Connect:', error);\n      return false;\n    }\n  }\n\n  async syncData(collectionName: string, queryParams: Record<string, any>): Promise<DocumentData[]> {\n    try {\n      const collectionRef = collection(db, collectionName);\n      const constraints = Object.entries(queryParams).map(\n        ([field, value]) => where(field, '==', value)\n      );\n      const q = query(collectionRef, ...constraints);\n      const snapshot = await getDocs(q);\n      \n      return snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n    } catch (error) {\n      console.error('Error syncing data:', error);\n      throw error;\n    }\n  }\n}\n\nexport const dataConnect = DataConnect.getInstance();","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App.tsx';\nimport './index.css';\nimport { initializeAuth } from './services/firebase/auth';\nimport { initializeAnalytics } from './services/firebase/config';\nimport { dataConnect } from './services/firebase/dataConnect';\n\n// Initialize Firebase services\nPromise.all([\n  initializeAnalytics(),\n  initializeAuth(),\n  dataConnect.initializeConnection()\n]).catch(console.error);\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);"],"file":"assets/index-cfLo22va.js"}